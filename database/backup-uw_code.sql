-- MySQL dump 10.13  Distrib 8.4.2, for macos14 (arm64)
--
-- Host: 192.168.88.21    Database: uw_code
-- ------------------------------------------------------
-- Server version	8.4.5

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!50503 SET NAMES utf8mb4 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

--
-- Table structure for table `code_template_group`
--

DROP TABLE IF EXISTS `code_template_group`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `code_template_group` (
                                       `id` bigint NOT NULL COMMENT 'id',
                                       `group_type` int DEFAULT NULL COMMENT '数据源类型',
                                       `group_name` varchar(100) DEFAULT NULL COMMENT '模板组名',
                                       `group_desc` varchar(100) DEFAULT NULL COMMENT '模板组描述',
                                       `create_date` datetime(3) DEFAULT NULL COMMENT '创建日期',
                                       `modify_date` datetime(3) DEFAULT NULL COMMENT '修改日期',
                                       `state` int NOT NULL COMMENT '状态。1正常-1标记删除',
                                       PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='代码模版组';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `code_template_group`
--

LOCK TABLES `code_template_group` WRITE;
/*!40000 ALTER TABLE `code_template_group` DISABLE KEYS */;
INSERT INTO `code_template_group` VALUES (1,1,'springboot后端代码（DaoManager版）','生成包括entity，dto，controller相关的代码','2025-04-09 17:35:07.790','2025-05-22 08:52:19.687',1),(2,2,'vue3管理后台代码(PC版)','生成包括api，router，pages的相关代码','2023-10-07 23:28:01.000','2025-03-17 11:24:20.306',1),(3,2,'jmeter模板','jmeter模板','2023-10-07 23:28:01.000','2023-10-07 23:28:01.000',1),(5,2,'vue3+i18n资源文件','生成vu3代码，包含i18n的资源文件。','2023-10-07 23:28:01.000','2023-10-07 23:28:01.000',1),(6,2,'vue3+i18n管理后台代码(PC版)','生成包括api，router，pages，i18n的相关代码。','2023-10-07 23:28:01.000','2025-03-17 11:23:04.835',1),(8,2,'vue3+uniapp代码(移动版)','生成uniapp模板的接口代码','2023-10-07 23:28:01.000','2025-03-17 11:23:28.710',1),(9,1,'springboot后端代码（DaoFactory版）','生成包括entity，dto，controller相关的代码','2023-10-07 23:28:01.000','2024-02-05 10:49:03.953',1);
/*!40000 ALTER TABLE `code_template_group` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `code_template_info`
--

DROP TABLE IF EXISTS `code_template_info`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `code_template_info` (
                                      `id` bigint NOT NULL COMMENT 'id',
                                      `group_id` bigint NOT NULL COMMENT '模板分组id',
                                      `template_type` int DEFAULT NULL COMMENT '数据类型',
                                      `template_name` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL COMMENT '模板名称',
                                      `template_desc` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL COMMENT '模板描述',
                                      `template_filename` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL COMMENT '输出文件名模板',
                                      `template_body` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci COMMENT '模板内容',
                                      `create_date` datetime(3) DEFAULT NULL COMMENT '创建日期',
                                      `modify_date` datetime(3) DEFAULT NULL COMMENT '修改日期',
                                      `state` int NOT NULL COMMENT '状态。1正常-1标记删除',
                                      PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='代码模版';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `code_template_info`
--

LOCK TABLES `code_template_info` WRITE;
/*!40000 ALTER TABLE `code_template_info` DISABLE KEYS */;
INSERT INTO `code_template_info` VALUES (1,1,11,'java的entity代码（DaoManager版）','java的entity代码（DaoManager版）','/entity/${tableMeta.entityName}.java','<#setting number_format=\"#\">\npackage entity;\n\nimport com.fasterxml.jackson.annotation.JsonRawValue;\nimport io.swagger.v3.oas.annotations.media.Schema;\nimport uw.common.util.JsonUtils;\nimport uw.dao.DataEntity;\nimport uw.dao.DataUpdateInfo;\nimport uw.dao.annotation.ColumnMeta;\nimport uw.dao.annotation.TableMeta;\n\nimport java.io.Serializable;\n\n\n/**\n * ${tableMeta.entityName}实体类\n * ${tableMeta.remarks!}\n *\n * @author ${author}\n */\n@TableMeta(tableName=\"${tableMeta.tableName}\",tableType=\"${tableMeta.tableType}\")\n@Schema(title = \"${tableMeta.remarks!}\", description = \"${tableMeta.remarks!}\")\npublic class ${tableMeta.entityName} implements DataEntity,Serializable{\n\n<#list columnList as column>\n\n    /**\n     * <#if column.remarks??>${column.remarks}</#if>\n     */\n    @ColumnMeta(columnName=\"${column.columnName}\", dataType=\"${column.propertyType}\"<#if column.columnSize gt 0>, dataSize=<#if column.columnSize gte 2147483647>2147483646<#else>${column.columnSize}</#if></#if>, nullable=${(column.propertyName == \"saasId\") ? string(\'false\',column.isNullable)}<#if column.isPrimaryKey?? || column.propertyName == \"saasId\">, primaryKey=true</#if><#if column.isAutoIncrement??>, autoIncrement=true</#if>)\n    @Schema(title = \"${column.remarks!}\", description = \"${column.remarks!}\"<#if column.columnSize gt 0>, maxLength=<#if column.columnSize gte 2147483647>2147483646<#else>${column.columnSize}</#if></#if>, nullable=${(column.propertyName == \"saasId\") ? string(\'false\',column.isNullable)} )<#if column.typeName == \"json\">\n    @JsonRawValue(value = false)</#if>\n    private ${column.propertyType} ${column.propertyName};\n</#list>\n\n    /**\n     * 数据更新信息.\n     */\n    private transient DataUpdateInfo _UPDATED_INFO = null;\n\n    /**\n     * 是否加载完成.\n     */\n    private transient boolean _IS_LOADED;\n\n    /**\n     * 获得实体的表名。\n     */\n    @Override\n    public String ENTITY_TABLE(){\n        return \"${tableMeta.tableName}\";\n    }\n\n    /**\n     * 获得实体的表注释。\n     */\n    @Override\n    public String ENTITY_NAME(){\n        return \"${tableMeta.remarks!}\";\n    }\n\n    /**\n     * 获得主键\n     */\n    @Override\n    public Serializable ENTITY_ID(){\n        return <#if pkList?size gt 0>get${pkList[0].propertyName?cap_first}()<#else>getId()</#if>;\n    }\n\n    /**\n     * 获取更新信息.\n     */\n    @Override\n    public DataUpdateInfo GET_UPDATED_INFO() {\n        return this._UPDATED_INFO;\n    }\n\n    /**\n     * 清除更新信息.\n     */\n    @Override\n    public void CLEAR_UPDATED_INFO() {\n        _UPDATED_INFO = null;\n    }\n\n<#list columnList as column>\n\n    /**\n     * 获取<#if column.remarks??>${column.remarks}</#if>。\n     */\n    public ${column.propertyType} get${column.propertyName?cap_first}(){\n        return this.${column.propertyName};\n    }\n</#list>\n\n<#list columnList as column>\n\n    /**\n     * 设置<#if column.remarks??>${column.remarks}</#if>。\n     */\n    public void set${column.propertyName?cap_first}(${column.propertyType} ${column.propertyName}){\n        _UPDATED_INFO = DataUpdateInfo.addUpdateInfo(_UPDATED_INFO, \"${column.propertyName}\", this.${column.propertyName}, ${column.propertyName}, !_IS_LOADED );\n        this.${column.propertyName} = ${column.propertyName};\n    }\n\n    /**\n     *  设置<#if column.remarks??>${column.remarks}</#if>链式调用。\n     */\n    public ${tableMeta.entityName} ${column.propertyName}(${column.propertyType} ${column.propertyName}){\n        set${column.propertyName?cap_first}(${column.propertyName});\n        return this;\n    }\n</#list>\n\n    /**\n     * 重载toString方法.\n     */\n    @Override\n    public String toString() {\n        return JsonUtils.toString(this);\n    }\n\n}','2025-04-16 18:14:22.736','2025-05-22 08:48:55.488',1),(2,1,13,'java的dto代码（DaoManager版）','java的dto代码（DaoManager版）','/dto/${tableMeta.entityName}QueryParam.java','<#assign saasMode = columnList?filter(x->x.propertyName==\"saasId\")?size==1>\npackage dto;\n\nimport io.swagger.v3.oas.annotations.media.Schema;\n<#if saasMode>\nimport uw.common.app.dto.AuthPageQueryParam;\n<#else>\nimport uw.dao.PageQueryParam;\n</#if>\nimport uw.dao.annotation.QueryMeta;\n\nimport java.util.Date;\nimport java.util.HashMap;\nimport java.util.Map;\n\n/**\n* ${tableMeta.remarks!}列表查询参数。\n*/\n@Schema(title = \"${tableMeta.remarks!}列表查询参数\", description = \"${tableMeta.remarks!}列表查询参数\")\npublic class ${tableMeta.entityName}QueryParam extends ${saasMode?string(\"AuthPageQueryParam\",\"PageQueryParam\")}{\n\n<#if saasMode>\n    public ${tableMeta.entityName}QueryParam() {\n        super();\n    }\n\n    public ${tableMeta.entityName}QueryParam(Long saasId) {\n        super(saasId);\n    }\n	\n</#if>\n    /**\n     * 允许的排序属性。\n     * key:排序名 value:排序字段\n     *\n     * @return\n     */\n    @Override\n    public Map<String, String> ALLOWED_SORT_PROPERTY() {\n        return new HashMap<>() {{\n<#list columnList?filter(x->x.columnSize<1000) as column>\n            put( \"${column.propertyName}\", \"${column.columnName}\" );\n</#list>\n        }};\n    }\n\n<#list columnList?filter(x->x.propertyName!=\"saasId\") as column>\n    <#if column.columnName == \"id\">\n    /**\n    * ${column.remarks!}。\n    */\n    @QueryMeta(expr = \"${column.columnName}=?\")\n    @Schema(title=\"${column.remarks}\", description = \"${column.remarks}\")\n    private ${column.propertyObject} ${column.propertyName};\n\n    /**\n    * ID数组。\n    */\n    @QueryMeta(expr = \"${column.columnName} in (?)\")\n    @Schema(title=\"ID数组\", description = \"ID数组，可同时匹配多个。\")\n    private ${column.propertyObject}[] ids;\n\n    <#elseif column.propertyObject == \"java.util.Date\">\n    /**\n    * ${column.remarks!}范围。\n    */\n    @QueryMeta(expr = \"${column.columnName} between ? and ?\")\n    @Schema(title=\"${column.remarks}范围\", description = \"${column.remarks}范围\")\n    private ${column.propertyObject}[] ${column.propertyName}Range;\n\n    <#elseif column.columnName == \"state\">\n    /**\n    * ${column.remarks!}。\n    */\n    @QueryMeta(expr = \"${column.columnName}=?\")\n    @Schema(title=\"${column.remarks}\", description = \"${column.remarks}\")\n    private ${column.propertyObject} ${column.propertyName};\n\n    /**\n    * ${column.remarks!}数组。\n    */\n    @QueryMeta(expr = \"${column.columnName} in (?)\")\n    @Schema(title=\"${column.remarks}数组\", description = \"${column.remarks}数组，可同时匹配多个状态。\")\n    private ${column.propertyObject}[] ${column.propertyName}s;\n\n    /**\n    * 大于等于${column.remarks!}。\n    */\n    @QueryMeta(expr = \"${column.columnName}>=?\")\n    @Schema(title=\"大于等于${column.remarks}\", description = \"大于等于${column.remarks}\")\n    private ${column.propertyObject} ${column.propertyName}Gte;\n\n    /**\n    * 小于等于${column.remarks!}。\n    */\n    @QueryMeta(expr = \"${column.columnName}<=?\")\n    @Schema(title=\"小于等于${column.remarks}\", description = \"小于等于${column.remarks}\")\n    private ${column.propertyObject} ${column.propertyName}Lte;\n\n    <#else>\n    <#if column.propertyObject == \"String\">\n    <#if column.columnSize < 1000>\n    /**\n    * ${column.remarks!}。\n    */\n    @QueryMeta(expr = \"${column.columnName} like ?\")\n    @Schema(title=\"${column.remarks}\", description = \"${column.remarks}\")\n    private ${column.propertyObject} ${column.propertyName};\n	\n    </#if>\n    <#elseif (column.propertyObject == \"Long\" || column.propertyObject == \"Integer\") && !column.columnName?contains(\"id\") && !column.columnName?contains(\"type\") && !column.columnName?contains(\"state\")>\n    /**\n    * ${column.remarks!}。\n    */\n    @QueryMeta(expr = \"${column.columnName}=?\")\n    @Schema(title=\"${column.remarks}\", description = \"${column.remarks}\")\n    private ${column.propertyObject} ${column.propertyName};\n\n    /**\n    * ${column.remarks!}范围。\n    */\n    @QueryMeta(expr = \"${column.columnName} between ? and ?\")\n    @Schema(title=\"${column.remarks}范围\", description = \"${column.remarks}范围\")\n    private ${column.propertyObject}[] ${column.propertyName}Range;\n	\n    <#else>\n    /**\n    * ${column.remarks!}。\n    */\n    @QueryMeta(expr = \"${column.columnName}=?\")\n    @Schema(title=\"${column.remarks}\", description = \"${column.remarks}\")\n    private ${column.propertyObject} ${column.propertyName};\n	\n    </#if>\n    </#if>\n</#list>\n\n<#list columnList?filter(x->x.propertyName!=\"saasId\") as column>\n    <#if column.columnName == \"id\">\n    /**\n    * 获取${column.remarks!}。\n    */\n    public ${column.propertyObject} get${column.propertyName?cap_first}() {\n        return this.${column.propertyName};\n    }\n\n    /**\n    * 设置${column.remarks!}。\n    */\n    public void set${column.propertyName?cap_first}(${column.propertyObject} ${column.propertyName}) {\n        this.${column.propertyName} = ${column.propertyName};\n    }\n\n    /**\n    * 设置${column.remarks!}链式调用。\n    */\n    public ${tableMeta.entityName}QueryParam ${column.propertyName}(${column.propertyObject} ${column.propertyName}) {\n        set${column.propertyName?cap_first}(${column.propertyName});\n        return this;\n    }\n\n    /**\n    * 获取ID数组。\n    */\n    public ${column.propertyObject}[] getIds() {\n        return this.ids;\n    }\n\n    /**\n    * 设置ID数组。\n    */\n    public void setIds(${column.propertyObject}[] ids) {\n        this.ids = ids;\n    }\n\n    /**\n    * 设置ID数组链式调用。\n    */\n    public ${tableMeta.entityName}QueryParam ids(${column.propertyObject}[] ids) {\n        setIds(ids);\n        return this;\n    }\n\n    <#elseif column.propertyObject == \"java.util.Date\">\n    /**\n    * 获取${column.remarks!}范围。\n    */\n    public ${column.propertyObject}[] get${column.propertyName?cap_first}Range(){\n        return this.${column.propertyName}Range;\n    }\n\n    /**\n    * 设置${column.remarks!}范围。\n    */\n    public void set${column.propertyName?cap_first}Range(${column.propertyObject}[] ${column.propertyName}Range){\n        this.${column.propertyName}Range = ${column.propertyName}Range;\n    }\n	\n    /**\n    * 设置${column.remarks!}范围链式调用。\n    */\n    public ${tableMeta.entityName}QueryParam ${column.propertyName}Range(${column.propertyObject}[] ${column.propertyName}Range) {\n        set${column.propertyName?cap_first}Range(${column.propertyName}Range);\n        return this;\n    }\n	\n    <#elseif column.columnName == \"state\">\n    /**\n    * 获取${column.remarks!}。\n    */\n    public ${column.propertyObject} get${column.propertyName?cap_first}(){\n        return this.${column.propertyName};\n    }\n\n    /**\n    * 设置${column.remarks!}。\n    */\n    public void set${column.propertyName?cap_first}(${column.propertyObject} ${column.propertyName}){\n        this.${column.propertyName} = ${column.propertyName};\n    }\n	\n    /**\n    * 设置${column.remarks!}链式调用。\n    */\n    public ${tableMeta.entityName}QueryParam ${column.propertyName}(${column.propertyObject} ${column.propertyName}) {\n        set${column.propertyName?cap_first}(${column.propertyName});\n        return this;\n    }\n\n    /**\n    * 获取${column.remarks!}数组。\n    */\n    public ${column.propertyObject}[] get${column.propertyName?cap_first}s(){\n        return this.${column.propertyName}s;\n    }\n\n    /**\n    * 设置${column.remarks!}数组。\n    */\n    public void set${column.propertyName?cap_first}s(${column.propertyObject}[] ${column.propertyName}s){\n        this.${column.propertyName}s = ${column.propertyName}s;\n    }\n	\n    /**\n    * 设置${column.remarks!}数组链式调用。\n    */\n    public ${tableMeta.entityName}QueryParam ${column.propertyName}s(${column.propertyObject}[] ${column.propertyName}s) {\n        set${column.propertyName?cap_first}s(${column.propertyName}s);\n        return this;\n    }\n    \n    /**\n    * 获取大于等于${column.remarks!}。\n    */\n    public ${column.propertyObject} get${column.propertyName?cap_first}Gte(){\n        return this.${column.propertyName}Gte;\n    }\n\n    /**\n    * 设置大于等于${column.remarks!}。\n    */\n    public void set${column.propertyName?cap_first}Gte(${column.propertyObject} ${column.propertyName}Gte){\n        this.${column.propertyName}Gte = ${column.propertyName}Gte;\n    }\n	\n    /**\n    * 设置大于等于${column.remarks!}链式调用。\n    */\n    public ${tableMeta.entityName}QueryParam ${column.propertyName}Gte(${column.propertyObject} ${column.propertyName}Gte) {\n        set${column.propertyName?cap_first}Gte(${column.propertyName}Gte);\n        return this;\n    }\n    \n    /**\n    * 获取小于等于${column.remarks!}。\n    */\n    public ${column.propertyObject} get${column.propertyName?cap_first}Lte(){\n        return this.${column.propertyName}Lte;\n    }\n\n    /**\n    * 获取小于等于${column.remarks!}。\n    */\n    public void set${column.propertyName?cap_first}Lte(${column.propertyObject} ${column.propertyName}Lte){\n        this.${column.propertyName}Lte = ${column.propertyName}Lte;\n    }\n	\n    /**\n    * 获取小于等于${column.remarks!}链式调用。\n    */\n    public ${tableMeta.entityName}QueryParam ${column.propertyName}Lte(${column.propertyObject} ${column.propertyName}Lte) {\n        set${column.propertyName?cap_first}Lte(${column.propertyName}Lte);\n        return this;\n    }\n    \n    <#else>\n    <#if column.propertyObject == \"String\">\n    <#if column.columnSize < 1000>\n    /**\n    * 获取${column.remarks!}。\n    */\n    public ${column.propertyObject} get${column.propertyName?cap_first}(){\n        return this.${column.propertyName};\n    }\n\n    /**\n    * 设置${column.remarks!}。\n    */\n    public void set${column.propertyName?cap_first}(${column.propertyObject} ${column.propertyName}){\n        this.${column.propertyName} = ${column.propertyName};\n    }\n	\n    /**\n    * 设置${column.remarks!}链式调用。\n    */\n    public ${tableMeta.entityName}QueryParam ${column.propertyName}(${column.propertyObject} ${column.propertyName}) {\n        set${column.propertyName?cap_first}(${column.propertyName});\n        return this;\n    }\n	\n    </#if>\n    <#elseif (column.propertyObject == \"Long\" || column.propertyObject == \"Integer\") && !column.columnName?contains(\"id\") && !column.columnName?contains(\"type\") && !column.columnName?contains(\"state\")>\n    /**\n    * 获取${column.remarks!}。\n    */\n    public ${column.propertyObject} get${column.propertyName?cap_first}(){\n        return this.${column.propertyName};\n    }\n\n    /**\n    * 设置${column.remarks!}。\n    */\n    public void set${column.propertyName?cap_first}(${column.propertyObject} ${column.propertyName}){\n        this.${column.propertyName} = ${column.propertyName};\n    }\n	\n    /**\n    * 设置${column.remarks!}链式调用。\n    */\n    public ${tableMeta.entityName}QueryParam ${column.propertyName}(${column.propertyObject} ${column.propertyName}){\n        set${column.propertyName?cap_first}(${column.propertyName});\n        return this;\n    }\n\n    /**\n    * 获取${column.remarks!}范围。\n    */\n    public ${column.propertyObject}[] get${column.propertyName?cap_first}Range(){\n        return this.${column.propertyName}Range;\n    }\n\n    /**\n    * 设置${column.remarks!}范围。\n    */\n    public void set${column.propertyName?cap_first}Range(${column.propertyObject}[] ${column.propertyName}Range){\n        this.${column.propertyName}Range = ${column.propertyName}Range;\n    }\n	\n    /**\n    * 设置${column.remarks!}范围链式调用。\n    */\n    public ${tableMeta.entityName}QueryParam ${column.propertyName}Range(${column.propertyObject}[] ${column.propertyName}Range){\n        set${column.propertyName?cap_first}Range(${column.propertyName}Range);\n        return this;\n    }\n	\n    <#else>\n    /**\n    * 获取${column.remarks!}。\n    */\n    public ${column.propertyObject} get${column.propertyName?cap_first}(){\n        return this.${column.propertyName};\n    }\n\n    /**\n    * 设置${column.remarks!}。\n    */\n    public void set${column.propertyName?cap_first}(${column.propertyObject} ${column.propertyName}){\n        this.${column.propertyName} = ${column.propertyName};\n    }\n	\n    /**\n    * 设置${column.remarks!}链式调用。\n    */\n	public ${tableMeta.entityName}QueryParam ${column.propertyName}(${column.propertyObject} ${column.propertyName}){\n        set${column.propertyName?cap_first}(${column.propertyName});\n        return this;\n    }\n	\n    </#if>\n    </#if>\n</#list>\n\n}','2025-04-16 18:15:28.801','2025-04-17 21:54:45.403',1),(3,1,12,'java的controller代码（DaoManager版）','java的controller代码（DaoManager版）','/controller${tableMeta.parentPath}/${tableMeta.entityName}Controller.java','<#assign saasMode = columnList?filter(x->x.propertyName==\"saasId\")?size==1>\npackage controller;\n\nimport io.swagger.v3.oas.annotations.Operation;\nimport io.swagger.v3.oas.annotations.Parameter;\nimport io.swagger.v3.oas.annotations.tags.Tag;\nimport org.springframework.web.bind.annotation.*;\nimport uw.cache.FusionCache;\nimport uw.common.app.dto.AuthIdQueryParam;\nimport uw.common.app.dto.IdStateQueryParam;\nimport uw.common.app.dto.SysDataHistoryQueryParam;\nimport uw.common.app.entity.SysCritLog;\nimport uw.common.app.entity.SysDataHistory;\nimport uw.common.app.helper.SysDataHistoryHelper;\nimport uw.auth.service.constant.ActionLog;\nimport uw.auth.service.constant.AuthType;\nimport uw.auth.service.constant.UserType;\nimport uw.common.app.constant.CommonResponseCode;\nimport uw.common.app.constant.CommonState;\nimport uw.auth.service.AuthServiceHelper;\nimport uw.auth.service.annotation.MscPermDeclare;\nimport uw.common.dto.ResponseData;\nimport uw.dao.*;\n\nimport java.util.Date;\n\n\n/**\n * ${tableMeta.remarks!}管理。\n */\n@RestController\n@RequestMapping(\"${tableMeta.entityPath!}\")\n@Tag(name = \"${tableMeta.remarks!}管理\", description = \"${tableMeta.remarks!}增删改查列管理\")\n@MscPermDeclare(user = UserType.SAAS)\npublic class ${tableMeta.entityName}Controller {\n\n    private final DaoManager dao = DaoManager.getInstance();\n\n    /**\n     * 列表${tableMeta.remarks!}。\n     *\n     * @param queryParam\n     * @return\n     *\n     */\n    @GetMapping(\"/list\")\n    @Operation(summary = \"列表${tableMeta.remarks!}\", description = \"列表${tableMeta.remarks!}\")\n    @MscPermDeclare(user = UserType.SAAS, auth = AuthType.PERM, log = ActionLog.REQUEST)\n    public ResponseData<DataList<${tableMeta.entityName}>> list(${tableMeta.entityName}QueryParam queryParam){\n        AuthServiceHelper.logRef(${tableMeta.entityName}.class);\n        return dao.list(${tableMeta.entityName}.class, queryParam);\n    }\n\n    /**\n     * 轻量级列表${tableMeta.remarks!}，一般用于select控件。\n     *\n     * @return\n     */\n    @GetMapping(\"/liteList\")\n    @Operation(summary = \"轻量级列表${tableMeta.remarks!}\", description = \"轻量级列表${tableMeta.remarks!}，一般用于select控件。\")\n    @MscPermDeclare(user = UserType.SAAS, auth = AuthType.USER, log = ActionLog.NONE)\n    public ResponseData<DataList<${tableMeta.entityName}>> liteList(${tableMeta.entityName}QueryParam queryParam){\n        queryParam.SELECT_SQL( \"SELECT ${columnList?filter(x->x.columnSize<1000)?map(x->x.columnName)?join(\",\")} from ${tableMeta.tableName} \" );\n        return dao.list(${tableMeta.entityName}.class, queryParam);\n    }\n\n    /**\n     * 加载${tableMeta.remarks!}。\n     *\n     * @param ${pkList[0].propertyName}\n     *\n     */\n    @GetMapping(\"/load\")\n    @Operation(summary = \"加载${tableMeta.remarks!}\", description = \"加载${tableMeta.remarks!}\")\n    @MscPermDeclare(user = UserType.SAAS, auth = AuthType.PERM, log = ActionLog.REQUEST)\n    public ResponseData<${tableMeta.entityName}> load(@Parameter(description = \"主键ID\", required = true) @RequestParam ${pkList[0].propertyType} ${pkList[0].propertyName})  {\n        AuthServiceHelper.logRef(${tableMeta.entityName}.class,${pkList[0].propertyName});\n        <#if saasMode>\n        return dao.queryForSingleObject(${tableMeta.entityName}.class, new AuthIdQueryParam(${pkList[0].propertyName}));\n        <#else>\n        return dao.load(${tableMeta.entityName}.class, ${pkList[0].propertyName});\n        </#if>\n    }\n\n    /**\n     * 查询数据历史。\n     *\n     * @param\n     * @return\n     */\n    @GetMapping(\"/listDataHistory\")\n    @Operation(summary = \"查询数据历史\", description = \"查询数据历史\")\n    @MscPermDeclare(user = UserType.SAAS, auth = AuthType.PERM, log = ActionLog.REQUEST)\n    public ResponseData<DataList<SysDataHistory>> listDataHistory(SysDataHistoryQueryParam queryParam){\n        AuthServiceHelper.logRef(${tableMeta.entityName}.class, queryParam.getEntityId());\n        queryParam.setEntityClass(${tableMeta.entityName}.class);\n        return dao.list(SysDataHistory.class, queryParam);\n    }\n\n    /**\n     * 查询操作日志。\n     *\n     * @param\n     * @return\n     */\n    @GetMapping(\"/listCritLog\")\n    @Operation(summary = \"查询操作日志\", description = \"查询操作日志\")\n    @MscPermDeclare(user = UserType.SAAS, auth = AuthType.PERM, log = ActionLog.REQUEST)\n    public ResponseData<DataList<SysCritLog>> listCritLog(SysCritLogQueryParam queryParam)  {\n        AuthServiceHelper.logRef(${tableMeta.entityName}.class, queryParam.getBizId());\n        queryParam.setBizTypeClass(${tableMeta.entityName}.class);\n        return dao.list(SysCritLog.class, queryParam);\n    }\n\n    /**\n     * 新增${tableMeta.remarks!}。\n     *\n     * @param ${tableMeta.entityName?uncap_first}\n     * @return\n     *\n     */\n    @PostMapping(\"/save\")\n    @Operation(summary = \"新增${tableMeta.remarks!}\", description = \"新增${tableMeta.remarks!}\")\n    @MscPermDeclare(user = UserType.SAAS, auth = AuthType.PERM, log = ActionLog.CRIT)\n    public ResponseData<${tableMeta.entityName}> save(@RequestBody ${tableMeta.entityName} ${tableMeta.entityName?uncap_first}){\n        long id = dao.getSequenceId(${tableMeta.entityName}.class);\n        AuthServiceHelper.logRef(${tableMeta.entityName}.class,id);\n        ${tableMeta.entityName?uncap_first}.setId(id);\n        <#if saasMode>\n        ${tableMeta.entityName?uncap_first}.setSaasId(AuthServiceHelper.getSaasId());\n        </#if>\n        ${tableMeta.entityName?uncap_first}.setCreateDate(new Date());\n        ${tableMeta.entityName?uncap_first}.setModifyDate(null);\n        ${tableMeta.entityName?uncap_first}.setState(CommonState.ENABLED.getValue());\n        return dao.save( ${tableMeta.entityName?uncap_first} ).onSuccess(savedEntity -> {\n            //保存历史记录\n            SysDataHistoryHelper.saveHistory(${tableMeta.entityName?uncap_first});\n        });\n    }\n\n    /**\n     * 修改${tableMeta.remarks!}。\n     *\n     * @param ${tableMeta.entityName?uncap_first}\n     * @return\n     *\n     */\n    @PutMapping(\"/update\")\n    @Operation(summary = \"修改${tableMeta.remarks!}\", description = \"修改${tableMeta.remarks!}\")\n    @MscPermDeclare(user = UserType.SAAS, auth = AuthType.PERM, log = ActionLog.CRIT)\n    public ResponseData<${tableMeta.entityName}> update(@RequestBody ${tableMeta.entityName} ${tableMeta.entityName?uncap_first}, @Parameter(description = \"备注\") @RequestParam String remark){\n        AuthServiceHelper.logInfo(${tableMeta.entityName}.class,${tableMeta.entityName?uncap_first}.get${pkList[0].propertyName?cap_first}(),remark);\n        <#if saasMode>\n        return dao.queryForSingleObject( ${tableMeta.entityName}.class,new AuthIdQueryParam(${tableMeta.entityName?uncap_first}.get${pkList[0].propertyName?cap_first}()) ).onSuccess(${tableMeta.entityName?uncap_first}Db-> {\n        <#else>\n        return dao.load( ${tableMeta.entityName}.class, ${tableMeta.entityName?uncap_first}.get${pkList[0].propertyName?cap_first}() ).onSuccess(${tableMeta.entityName?uncap_first}Db-> {\n        </#if>\n                 <#list columnList as column>\n            <#if column.propertyName!=\"id\" && column.propertyName!=\"saasId\"\n                    && column.propertyName!=\"createDate\" && column.propertyName!=\"state\" && column.propertyName!=\"modifyDate\">\n                    ${tableMeta.entityName?uncap_first}Db.set${column.propertyName?cap_first}(${tableMeta.entityName?uncap_first}.get${column.propertyName?cap_first}());\n            </#if>\n        </#list>\n                    ${tableMeta.entityName?uncap_first}Db.setModifyDate(new Date());\n            return dao.update( ${tableMeta.entityName?uncap_first}Db ).onSuccess(updatedEntity -> {\n                //保存历史记录\n                SysDataHistoryHelper.saveHistory( ${tableMeta.entityName?uncap_first}Db,remark );\n            } );\n        } );\n    }\n\n    /**\n     * 启用${tableMeta.remarks!}。\n     *\n     * @param ${pkList[0].propertyName}\n     *\n     */\n    @PutMapping(\"/enable\")\n    @Operation(summary = \"启用${tableMeta.remarks!}\", description = \"启用${tableMeta.remarks!}\")\n    @MscPermDeclare(user = UserType.SAAS, auth = AuthType.PERM, log = ActionLog.CRIT)\n    public ResponseData enable(@Parameter(description = \"主键ID\") @RequestParam ${pkList[0].propertyType} ${pkList[0].propertyName}, @Parameter(description = \"备注\") @RequestParam String remark){\n        AuthServiceHelper.logInfo(${tableMeta.entityName}.class,${pkList[0].propertyName},remark);\n   <#if saasMode>\n        return dao.update(new ${tableMeta.entityName}().modifyDate(new Date()).state(CommonState.ENABLED.getValue()), new AuthIdStateQueryParam(${pkList[0].propertyName}, CommonState.DISABLED.getValue()));\n        <#else>\n        return dao.update(new ${tableMeta.entityName}().modifyDate(new Date()).state(CommonState.ENABLED.getValue()), new IdStateQueryParam(${pkList[0].propertyName}, CommonState.DISABLED.getValue()));\n        </#if>\n    }\n\n    /**\n     * 禁用${tableMeta.remarks!}。\n     *\n     * @param ${pkList[0].propertyName}\n     *\n     */\n    @PutMapping(\"/disable\")\n    @Operation(summary = \"禁用${tableMeta.remarks!}\", description = \"禁用${tableMeta.remarks!}\")\n    @MscPermDeclare(user = UserType.SAAS, auth = AuthType.PERM, log = ActionLog.CRIT)\n    public ResponseData disable(@Parameter(description = \"主键ID\") @RequestParam ${pkList[0].propertyType} ${pkList[0].propertyName}, @Parameter(description = \"备注\") @RequestParam String remark){\n        AuthServiceHelper.logInfo(${tableMeta.entityName}.class,${pkList[0].propertyName},remark);\n   <#if saasMode>\n        return dao.update(new ${tableMeta.entityName}().modifyDate(new Date()).state(CommonState.DISABLED.getValue()), new AuthIdStateQueryParam(${pkList[0].propertyName}, CommonState.ENABLED.getValue()));\n        <#else>\n        return dao.update(new ${tableMeta.entityName}().modifyDate(new Date()).state(CommonState.DISABLED.getValue()), new IdStateQueryParam(${pkList[0].propertyName}, CommonState.ENABLED.getValue()));\n        </#if>\n    }\n\n    /**\n     * 删除${tableMeta.remarks!}。\n     *\n     * @param ${pkList[0].propertyName}\n     *\n     */\n    @DeleteMapping(\"/delete\")\n    @Operation(summary = \"删除${tableMeta.remarks!}\", description = \"删除${tableMeta.remarks!}\")\n    @MscPermDeclare(user = UserType.SAAS, auth = AuthType.PERM, log = ActionLog.CRIT)\n    public ResponseData delete(@Parameter(description = \"主键ID\") @RequestParam ${pkList[0].propertyType} ${pkList[0].propertyName}, @Parameter(description = \"备注\") @RequestParam String remark){\n        AuthServiceHelper.logInfo(${tableMeta.entityName}.class,${pkList[0].propertyName},remark);\n   <#if saasMode>\n        return dao.update(new ${tableMeta.entityName}().modifyDate(new Date()).state(CommonState.DELETED.getValue()), new AuthIdStateQueryParam(${pkList[0].propertyName}, CommonState.DISABLED.getValue()));\n        <#else>\n        return dao.update(new ${tableMeta.entityName}().modifyDate(new Date()).state(CommonState.DELETED.getValue()), new IdStateQueryParam(${pkList[0].propertyName}, CommonState.DISABLED.getValue()));\n        </#if>\n    }\n\n}','2025-04-09 18:26:46.239','2025-04-24 17:14:09.608',1),(5,2,21,'vue3的api代码模版','按照模块生成api代码','/api/${apiName!\"\"}Api.ts','import request from \'@/utils/request\'\nimport { ResponseData, DataList, ESDataList } from \'./uwAuthCenterAuthApi\'\n\n<#list apiInfoList as apiInfo>\n//${apiInfo.title!}\nexport const ${apiInfo.function} = (<#if apiInfo.requestInfo?? && apiInfo.parameterInfoList??>\n\n  data: ${apiInfo.requestInfo.type!\"file\"} ,\n    <#if apiInfo.parameterInfoList?size==1 && (apiInfo.parameterInfoList[0].name?contains(\"queryParam\") || apiInfo.parameterInfoList[0].name?contains(\"QueryParam\"))>\n  params: ${apiInfo.parameterInfoList[0].type}\n    <#else>params: {\n        <#list apiInfo.parameterInfoList as parameter>\n  ${parameter.name}${parameter.required?string(\'\',\'?\')}: ${parameter.type} // ${parameter.title!}\n        </#list>\n}\n    </#if>\n<#elseif apiInfo.requestInfo??>\n\n  data: ${apiInfo.requestInfo.type!\"file\"}\n<#elseif apiInfo.parameterInfoList??>\n    <#if apiInfo.parameterInfoList?size==1 && (apiInfo.parameterInfoList[0].name?contains(\"queryParam\") || apiInfo.parameterInfoList[0].name?contains(\"QueryParam\"))>\n  params: ${apiInfo.parameterInfoList[0].type}\n    <#else>params: {\n        <#list apiInfo.parameterInfoList as parameter>\n  ${parameter.name}${parameter.required?string(\'\',\'?\')}: ${parameter.type} // ${parameter.title!}\n        </#list>\n}</#if></#if>): Promise<${apiInfo.responseInfo.type!\"void\"}> => {\n  return request(\'/${projectName}${apiInfo.path}\', {\n    method: \'${apiInfo.method}\',\n<#if apiInfo.requestInfo?? && apiInfo.parameterInfoList??>\n    data,\n    params,\n<#elseif apiInfo.requestInfo??>\n    data,\n<#elseif apiInfo.parameterInfoList??>\n    params,\n</#if>\n<#if apiInfo.path?contains(\"export\") || apiInfo.path?contains(\"download\") || apiInfo.path?contains(\"Download\") || apiInfo.path?contains(\"Export\")>\n     responseType: \'blob\'\n</#if>\n  })\n}\n</#list>\n\n<#list schemaInfoList as schemaInfo>\n//${schemaInfo.title!}\nexport interface ${schemaInfo.name} {\n<#list schemaInfo.propertyList as property>\n  ${property.name!}?: ${property.type} //${property.title!}\n</#list>\n}\n</#list>','2023-10-07 23:28:01.000','2025-01-21 18:36:35.479',1),(6,2,22,'vue3的router代码模版','按照模块生成router代码','/router/${apiName!\"\"}Router.ts','import type { RouteRecordRaw } from \'vue-router\'\nconst RouterList: RouteRecordRaw[] = [\n<#list apiGroupInfoList as apiGroupInfo>\n<#if apiGroupInfo.hasListFunction()><#if apiGroupInfo_index != 0>,\n</#if>  \n  {\n    path: \'/${apiName!\"\"}${apiGroupInfo.path}\',\n    name: \'${apiName!\"\"}.${apiGroupInfo.function}\',\n    component: () => import(\'@/pages/${apiName!\"\"}${apiGroupInfo.path}/index.vue\'),\n    meta: {\n      title: \'${apiGroupInfo.title!\"空菜单名\"}\'\n    }\n  }<#if apiGroupInfo?has_next></#if></#if></#list>\n]\n\nexport default RouterList','2023-10-07 23:28:01.000','2023-10-07 23:28:01.000',1),(7,2,23,'vue3的page代码模版','按照模块生成vuePage代码','/pages/${apiName!\"\"}${apiGroupInfo.path}/index.vue','<#if functionList??>\n<script setup lang=\"ts\">\nimport { type ComponentInternalInstance } from \'vue\'\nimport { SearchFormType } from \'@/components/SearchForm/type\'\nimport {\n<#if apiGroupInfo.apiInfoList??> \n<#list apiGroupInfo.apiInfoList as apiInfo>\n  ${apiInfo.function}<#sep>,\n</#sep></#list><#if schemaInfo?? || queryInfo ??>,</#if >\n</#if >\n  <#if schemaInfo??> type ${ (schemaInfo.name)! }</#if > <#if schemaInfo?? && queryInfo ??>,</#if >\n  <#if queryInfo??> type ${ (queryInfo.name)! }</#if >\n} from \'@/api/${apiName!\"app\"}Api\'\nimport { ResponseData,DataList } from \'@/api/uwAuthCenterAuthApi\'\nimport { useI18n } from \'vue-i18n\'\nimport { useCrud } from \'@/utils/useCrud\'\nimport { usePermissionCode, useSimplifyPrompt, useExportExcel } from \'@/utils/hooks\'\nimport { useCommonSelectTypes } from \'@/utils/enumeration\'\nimport { ElMessage } from \'element-plus\'\n\n<#if functionDelete??>\n// 删除接口参数类型\ninterface deleteParamsType{\n  <#if functionDeleteParameterInfoList??><#list functionDeleteParameterInfoList as parameterInfo>${parameterInfo.name}: ${parameterInfo.type},</#list></#if>\n}\n</#if>\n\n<#if functionListDataHistory??>\nconst HistoryLog = defineAsyncComponent(\n  () => import(\'@/components/HistoryLog/index.vue\')\n)\n</#if>\n\n// 获取全局挂载的方法\nconst { proxy } = getCurrentInstance() as ComponentInternalInstance\nconst { useActivated, formatDate } = proxy as any\nconst { t } = useI18n()\nconst { handleTypeForLabel, stateTypes } = useCommonSelectTypes ()\n \nconst {\n  tableConfig, // 表格相关配置属性\n  handleList, // 列表请求函数\n  <#if functionSave?? || functionUpdate ??>\n  dialogConfig, // 弹窗相关配置属性\n  dialogFormRef, // 弹窗表单ref\n  handleResetDialog, // 重置弹窗表单函数\n  handleSubmitDialog, // 提交弹窗表单\n  </#if>\n  <#if functionDelete??>\n  handleDelete, // 删除函数\n  </#if>\n  <#if functionSave ??>\n  handleOpenSaveDialog, // 打开保存弹窗\n  </#if >\n  <#if functionUpdate??> \n  handleOpenUpdateDialog, // 打开编辑弹窗\n  </#if >\n} = useCrud <${(schemaInfo.name)!}, ${ (queryInfo.name)! }, <#if functionDelete??>deleteParamsType</#if>> ({\n  // 列表请求接口\n  listFn: (): Promise<ResponseData<DataList<${ (schemaInfo.name)! }>>> => {\n    return ${ functionList }(tableConfig.queryParams)\n  },\n  <#if functionSave ??>\n  // 新增请求接口\n  saveFn: (): Promise<ResponseData<${ (schemaInfo.name)! } | void>> => {\n    return ${ functionSave }(dialogConfig.dialogFormData)\n  },\n  </#if >\n  <#if functionUpdate??>\n  // 修改请求接口\n  updateFn: (remark?: string): Promise<ResponseData<${ (schemaInfo.name)! } | void>> =>{\n    return ${ functionUpdate }(dialogConfig.dialogFormData, { remark: remark || \'\' })\n  },\n  </#if >  \n  <#if functionDelete??>\n  // 删除请求接口\n  deleteFn: (params: deleteParamsType) => ${ functionDelete }(params)\n  </#if>\n}\n<#if functionUpdate?? || functionDelete??>\n, {\n<#if functionUpdate??>\n    openUpdateRemark: true,\n </#if >\n <#if functionDelete??>\n    openDeleteRemark: true\n</#if >\n  }\n </#if>\n)\n\n  // 搜索表单 结构组成数据\nconst searchFormConfig = computed < SearchFormType[] > (() => {\n  return [\n    <#if (queryInfo.propertyList) ??>\n    <#list queryInfo.propertyList as property >\n    <#if (property.name[0]) != \"$\" && property.name != \"stateGte\" && property.name != \"stateLte\"> <#if property_index != 0 >,\n    </#if > {\n      field: \'${property.name}\',\n      formItem: {\n        label: \'${property.title!}\',\n        labelWidth: \'90\'\n      },\n      formItemWidth: 280,\n      clearable: true,\n      componentType: \'input\',\n      placeholder: \'请输入${property.title!}\'\n    }</#if ></#list >\n    </#if >\n]\n})\n\n<#if functionEnable??>\n// 启用\nconst handleEnable = (item: ${(schemaInfo.name)!}) => {\n  useSimplifyPrompt({\n    message: \'请输入启用原因！\',\n    confirmCallBack(remark) {\n      tableConfig.tableLoading = true\n      ${ functionEnable }({\n        id: item.id!,\n        remark: remark || \'\'\n      })\n        .then(res => {\n          if (res.state === \'success\') {\n            ElMessage.success(\'启用成功\')\n            handleList()\n          } else {\n            ElMessage.error(res.msg)\n          }\n          tableConfig.tableLoading = false\n        })\n        .catch(() => {\n          tableConfig.tableLoading = false\n        })\n    }\n  })\n}\n</#if >\n\n\n<#if functionDisable??>\n// 禁用\nconst handleDisable = (item: ${(schemaInfo.name)!}) => {\n  useSimplifyPrompt({\n    message: \'请输入禁用原因！\',\n    confirmCallBack(remark) {\n      tableConfig.tableLoading = true\n      ${ functionDisable }({\n        id: item.id!,\n        remark: remark || \'\'\n      })\n        .then(res => {\n          if (res.state === \'success\') {\n            ElMessage.success(\'禁用成功\')\n            handleList()\n          } else {\n            ElMessage.error(res.msg)\n          }\n          tableConfig.tableLoading = false\n        })\n        .catch(() => {\n          tableConfig.tableLoading = false\n        })\n    }\n  })\n}\n</#if >\n\n<#if functionListDataHistory??>\n// 数据历史\nconst queryHistoryRef = ref()\nconst handleHistory = (id: number) => {\n  queryHistoryRef.value.openHistoryLog(id)\n}\nconst queryHistory = (item: ${(schemaInfo.name)!}) => {\n  return ${ functionListDataHistory }(item)\n}\n</#if>\n\n<#if functionListCritLog??>\n// 操作日志\nconst queryCritLogRef = ref()\nconst handleCritLog = (id: number) => {\n  queryCritLogRef.value.openCritLog(id)\n}\nconst queryCritLog = (item: ${(schemaInfo.name)!}) => {\n  return ${ functionListCritLog }(item)\n}\n</#if>\n\nconst exportColumns = computed (() => {\n  return [\n    <#if (queryInfo.propertyList) ??>\n    <#list queryInfo.propertyList as property >\n    <#if (property.name[0]) != \"$\" > <#if property_index != 0 >,\n    </#if > {\n      field: \'${property.name}\',\n      label: \'${property.title!}\',\n    }</#if >\n    </#list >\n    </#if >\n]\n})\n\nconst { startExport } = useExportExcel()\n\n<#list apiInfoList as apiInfo>\n <#if apiInfo.function ==  functionList>\nconst exportExcel = () => {\n  startExport({\n    url: \'/${projectName}${apiInfo.path}\',\n    queryParams: tableConfig.queryParams,\n    columns: exportColumns.value,\n    sizeAll: tableConfig.sizeAll\n  })\n}\n</#if >\n  </#list>\n\n<#if functionList??>\n  useActivated(() => {\n    handleList()\n  })\n</#if >\n  </script>\n\n  <template>\n<div class=\"flex_col\">\n    <#if functionList??>\n<div class=\"flex_col_header\">\n      <SearchForm v-model=\"tableConfig.queryParams\" :bnt-loading=\"tableConfig.tableLoading\" :list=\"searchFormConfig\" @change=\"handleList\" @search=\"handleList\">\n          <template #right>\n        <#if functionSave??>\n            <el-button class=\"margin-left-10\" type=\"primary\" size=\"small\" round icon=\"Plus\" @click=\"handleOpenSaveDialog\">\n              新增\n            </el-button>\n        </#if>\n                 <el-button\n            @click=\"exportExcel\"\n            round\n            type=\"primary\"\n            size=\"small\"\n            icon=\"Download\"\n          >\n           导出\n          </el-button>\n          </template>\n      </SearchForm>\n</div>\n    </#if>\n    <el-table border style=\"width: 100%\" :header-cell-style=\"{\n      backgroundColor: \'var(--el-color-info-light-9)\'\n    }\" :data=\"tableConfig.dataList\" v-loading=\"tableConfig.tableLoading\" stripe show-overflow-tooltip class=\"flex_col_body\">\n    <#if (schemaInfo.propertyList) ??>\n     <#list schemaInfo.propertyList as property >\n     <#if property.maxLength lte 1000>\n       <#if property.name?lower_case?ends_with(\"date\")>\n          <el-table-column  \n            prop=\"${property.name}\"\n            label=\"${property.title!}\"\n            align=\"center\"\n            width=\"180px\"\n            >\n              <template v-slot=\"{ row }\">\n                <span>{{ formatDate(row[\'${property.name}\']) }}</span>\n              </template>\n            </el-table-column>\n       <#elseif (property.name) == \'state\'>\n         <el-table-column  \n            prop=\"${property.name}\"\n            label=\"${property.title!}\"\n            align=\"center\"\n            width=\"90\"\n            >\n              <template v-slot=\"{ row }\">\n                <el-link\n                  :type=\"row.state === 1 ? \'success\' : \'danger\'\"\n                  :underline=\"false\"\n                >\n                  {{ handleTypeForLabel( row.state,  stateTypes ) }}\n                </el-link>\n              </template>\n          </el-table-column>\n       <#else>\n          <el-table-column  \n          prop=\"${property.name}\"\n          label=\"${property.title!}\"\n          align=\"center\">\n          </el-table-column>\n        </#if>\n        </#if>\n      </#list >\n    </#if >\n      <#if functionSave?? || functionUpdate??>\n        <el-table-column label=\"操作\" align=\"center\" width=\"220\">\n          <template #default=\"scope\">\n            <el-button-group v-if=\"scope.row.state !== -1\">\n            <template v-if=\"scope.row.state === 0\">\n                <el-tooltip\n                content=\"启用\"\n                placement=\"top\"\n                >\n                  <el-button\n                    type=\"primary\"\n                    icon=\"CircleCheck\"\n                    size=\"small\"\n                    v-permission=\"usePermissionCode(\'enable\')\"\n                    @click=\"handleEnable(scope.row)\"\n                  ></el-button>\n                </el-tooltip>\n                        </template>\n            <template v-if=\"scope.row.state === 1\">\n                          <el-tooltip\n                            content=\"禁用\"\n                            placement=\"top\"\n                          >\n                            <el-button\n                              type=\"info\"\n                              size=\"small\"\n                              v-permission=\"usePermissionCode(\'disable\')\"\n                              @click=\"handleDisable(scope.row)\"\n                            >\n                              <i class=\"iconfont jinyong\"></i>\n                            </el-button>\n                          </el-tooltip>\n                        </template>\n              <#if functionUpdate??> \n                <el-tooltip\n                content=\"修改\"\n                placement=\"top\"\n                >\n                  <el-button\n                    type=\"primary\"\n                    icon=\"Edit\"\n                    size=\"small\"\n                    v-permission=\"usePermissionCode(\'update\')\"\n                    @click=\"handleOpenUpdateDialog(scope.row)\"\n                  ></el-button>\n                </el-tooltip>\n              </#if>\n              <#if functionListDataHistory??>\n            <el-tooltip\n              content=\"历史日志\"\n              placement=\"top\"\n              :enterable=\"false\"\n            >\n              <el-button\n                type=\"warning\"\n                icon=\"Comment\"\n                size=\"small\"\n                v-permission=\"usePermissionCode(\'listDataHistory\')\"\n             @click.stop=\"handleHistory(scope.row.id)\"\n              ></el-button>\n            </el-tooltip>\n            </#if>\n            <#if functionListCritLog??>\n            <el-tooltip\n              content=\"关键日志\"\n              placement=\"top\"\n              :enterable=\"false\"\n            >\n              <el-button\n                type=\"success\"\n                icon=\"DocumentChecked\"\n                size=\"small\"\n                   v-permission=\"usePermissionCode(\'listCritLog\')\"\n               @click.stop=\"handleCritLog(scope.row.id)\"\n              ></el-button>\n            </el-tooltip>\n            </#if>\n              <#if functionDelete??>\n              <template v-if=\"scope.row.state === 0\">\n                  <el-tooltip\n                    content=\"删除\"\n                    placement=\"top\"\n                  >\n                    <el-button\n                      type=\"danger\"\n                      icon=\"Delete\"\n                      size=\"small\"\n                      v-permission=\"usePermissionCode(\'delete\')\"\n                      @click=\"handleDelete({<#if functionDeleteParameterInfoList??><#list functionDeleteParameterInfoList as parameterInfo>\n                         <#if (parameterInfo.name) == \'remark\' >\n                              ${parameterInfo.name}: \'\'\n                       <#else>\n                              ${parameterInfo.name}:scope.row.${parameterInfo.name}\n                        </#if>  \n                     <#sep>, </#sep></#list></#if>})\"\n                    ></el-button>\n                </el-tooltip>\n              </template>\n              </#if>\n            </el-button-group>\n          </template>\n        </el-table-column>\n      </#if>\n    </el-table>\n\n    <#if functionList??>\n    <!-- 分页组件 -->\n      <Pagination  \n      v-model:page-size=\"tableConfig.queryParams.$rn\"\n      @page-size-change=\"handleList\"\n      :total=\"tableConfig.sizeAll\"\n      v-model:current-page=\"tableConfig.queryParams.$pg\"\n      @current-change=\"handleList\" \n      class=\"flex_col_bottom\"\n      />\n    </#if>\n</div>\n    <#if functionSave?? || functionUpdate??>\n    <!-- 新增、编辑弹窗 -->\n      <el-dialog \n        v-model=\"dialogConfig.dialogShow\" \n        :title=\"dialogConfig.dialogTitle\" \n        destroy-on-close \n        @close=\"handleResetDialog\"\n        draggable\n        :close-on-click-modal=\"false\"\n      >\n       <#if (schemaInfo.propertyList) ??>\n        <div v-loading=\"dialogConfig.dialogLoading\">\n           <el-form\n            ref=\"dialogFormRef\"\n            :model=\"dialogConfig.dialogFormData\"\n            label-width=\"120px\"\n            status-icon\n          >\n            <el-row>\n             <#list schemaInfo.propertyList as property >\n               <#if (property.name) != \"id\" && (property.name) != \"saasId\" && !property.name?lower_case?ends_with(\"date\") && (property.name) != \"state\">\n                <el-col :span=\"20\">\n                  <el-form-item \n                  label=\"${property.title!}\" \n                  prop=\"${property.name}\" \n                  :rules=\"[{ required: true, message: \'请输入${property.title!}\' }]\">\n                    <el-input\n                      v-model=\"dialogConfig.dialogFormData.${property.name}\"\n                      placeholder=\"请输入${property.title!}\"\n                      clearable\n                      ></el-input>\n                </el-form-item>\n                </el-col>\n               </#if >\n             </#list >\n            </el-row>\n          </el-form>\n          </div>\n         </#if >\n        <template #footer>\n          <el-button @click=\"dialogConfig.dialogShow = false\" icon=\"Close\">取消</el-button>\n          <el-button type=\"primary\" @click=\"handleSubmitDialog\" :loading=\"dialogConfig.dialogLoading\" icon=\"Check\">\n            {{ dialogConfig.dialogType === 0 ? \'新增\' : \'修改\' }}\n          </el-button>\n        </template>\n      </el-dialog>\n    </#if>\n\n<#if functionListDataHistory??>\n    <!-- 修改历史 -->\n    <HistoryLog\n      ref=\"queryHistoryRef\"\n      v-model:showDetail=\"dialogConfig.dialogShow\"\n      v-model:detailDialogForm=\"dialogConfig.dialogFormData\"\n      v-model:dialogType=\"dialogConfig.dialogType\"\n      v-model:dialogTitle=\"dialogConfig.dialogTitle\"\n      width=\"1200px\"\n      :queryHistory=\"queryHistory\"\n      entityClass=\"uw.code.center.entity.CodeTemplateGroup\"\n    ></HistoryLog>\n    </#if>\n<#if functionListCritLog??>\n  <!-- 关键日志 -->\n    <CritLog\n      ref=\"queryCritLogRef\"\n      v-model:showDetail=\"dialogConfig.dialogShow\"\n      v-model:detailDialogForm=\"dialogConfig.dialogFormData\"\n      v-model:dialogType=\"dialogConfig.dialogType\"\n      v-model:dialogTitle=\"dialogConfig.dialogTitle\"\n      width=\"1400px\"\n      :queryCritLog=\"queryCritLog\"\n      :showPage=\"true\"\n    ></CritLog>\n    </#if>\n  </template>\n\n  <style lang=\"scss\" scoped></style>\n  <#else>\n    // 此页面无,需要手动开发\n</#if>','2023-10-07 23:28:01.000','2025-05-14 14:10:43.182',1),(8,5,24,'i18n资源文件','i18n资源文件','/i18n/${apiName!\"\"}Menu.json','{\n<#list apiCatalogInfoList as apiCatalogInfo>\n  \"${apiCatalogInfo.path}\": \"${apiCatalogInfo.title!\"空菜单名\"}\",\n<#list apiCatalogInfo.apiGroupInfoList as apiGroupInfo>\n  \"${apiGroupInfo.path}\": \"${apiGroupInfo.title!\"空菜单名\"}\",\n</#list></#list>\n}','2023-10-07 23:28:01.000','2023-10-07 23:28:01.000',1),(9,6,21,'vue3的api代码模版','按照模块生成api代码','/api/${apiName!\"\"}Api.ts','import request from \'@/utils/request\'\nimport { ResponseData, DataList, ESDataList } from \'./uwAuthCenterAuthApi\'\n\n<#list apiInfoList as apiInfo>\n//${apiInfo.title!}\nexport const ${apiInfo.function} = (<#if apiInfo.requestInfo?? && apiInfo.parameterInfoList??>\n\n  data: ${apiInfo.requestInfo.type!\"file\"} ,\n    <#if apiInfo.parameterInfoList?size==1 && (apiInfo.parameterInfoList[0].name?contains(\"queryParam\") || apiInfo.parameterInfoList[0].name?contains(\"QueryParam\"))>\n  params: ${apiInfo.parameterInfoList[0].type}\n    <#else>params: {\n        <#list apiInfo.parameterInfoList as parameter>\n  ${parameter.name}${parameter.required?string(\'\',\'?\')}: ${parameter.type} // ${parameter.title!}\n        </#list>\n}\n    </#if>\n<#elseif apiInfo.requestInfo??>\n\n  data: ${apiInfo.requestInfo.type!\"file\"}\n<#elseif apiInfo.parameterInfoList??>\n    <#if apiInfo.parameterInfoList?size==1 && (apiInfo.parameterInfoList[0].name?contains(\"queryParam\") || apiInfo.parameterInfoList[0].name?contains(\"QueryParam\"))>\n  params: ${apiInfo.parameterInfoList[0].type}\n    <#else>params: {\n        <#list apiInfo.parameterInfoList as parameter>\n  ${parameter.name}${parameter.required?string(\'\',\'?\')}: ${parameter.type} // ${parameter.title!}\n        </#list>\n}</#if></#if>): Promise<${apiInfo.responseInfo.type!\"void\"}> => {\n  return request(\'/${projectName}${apiInfo.path}\', {\n    method: \'${apiInfo.method}\',\n<#if apiInfo.requestInfo?? && apiInfo.parameterInfoList??>\n    data,\n    params,\n<#elseif apiInfo.requestInfo??>\n    data,\n<#elseif apiInfo.parameterInfoList??>\n    params,\n</#if>\n<#if apiInfo.path?contains(\"export\") || apiInfo.path?contains(\"download\") || apiInfo.path?contains(\"Download\") || apiInfo.path?contains(\"Export\")>\n     responseType: \'blob\'\n</#if>\n  })\n}\n</#list>\n\n<#list schemaInfoList as schemaInfo>\n//${schemaInfo.title!}\nexport interface ${schemaInfo.name} {\n<#list schemaInfo.propertyList as property>\n  ${property.name!}?: ${property.type} //${property.title!}\n</#list>\n}\n</#list>','2023-10-07 23:28:01.000','2025-01-21 18:38:13.849',1),(10,6,22,'vue3的router代码模版','按照模块生成router代码','/router/${apiName!\"\"}.ts','import type { RouteRecordRaw } from \'vue-router\'\n\nconst RouterList: RouteRecordRaw[] = [\n<#list apiGroupInfoList as apiGroupInfo>\n<#if apiGroupInfo.hasListFunction()><#if apiGroupInfo_index != 0>,\n</#if>  \n  {\n    path: \'/${apiName!\"\"}${apiGroupInfo.path}\',\n    name: \'${apiName!\"\"}.${apiGroupInfo.function}\',\n    component: () => import(\'@/pages/${apiName!\"\"}${apiGroupInfo.path}/index.vue\'),\n    meta: {\n      title: \'${apiGroupInfo.title!\"空菜单名\"}\'\n    }\n  }<#if apiGroupInfo?has_next></#if></#if></#list>\n]\n\nexport default RouterList','2023-10-07 23:28:01.000','2023-10-07 23:28:01.000',1),(11,6,23,'vue3的page代码模版','按照模块生成vuePage代码','/pages/${apiName!\"\"}${apiGroupInfo.path}/index.vue','<#if functionList??>\n<script setup lang=\"ts\">\nimport { type ComponentInternalInstance } from \'vue\'\nimport { SearchFormType } from \'@/components/SearchForm/type\'\nimport {\n<#if apiGroupInfo.apiInfoList??> \n<#list apiGroupInfo.apiInfoList as apiInfo>\n  ${apiInfo.function}<#sep>,\n</#sep></#list><#if schemaInfo?? || queryInfo ??>,</#if >\n</#if >\n  <#if schemaInfo??> type ${ (schemaInfo.name)! }</#if > <#if schemaInfo?? && queryInfo ??>,</#if >\n  <#if queryInfo??> type ${ (queryInfo.name)! }</#if >\n} from \'@/api/${apiName!\"app\"}Api\'\nimport { ResponseData,DataList } from \'@/api/uwAuthCenterAuthApi\'\nimport { useI18n } from \'vue-i18n\'\nimport { useCrud } from \'@/utils/useCrud\'\nimport { usePermissionCode, useSimplifyPrompt, useExportExcel } from \'@/utils/hooks\'\nimport { useCommonSelectTypes } from \'@/utils/enumeration\'\nimport { ElMessage, ElMessageBox } from \'element-plus\'\n\n<#if functionDelete??>\n// 删除接口参数类型\ninterface deleteParamsType{\n  <#if functionDeleteParameterInfoList??><#list functionDeleteParameterInfoList as parameterInfo>${parameterInfo.name}: ${parameterInfo.type},</#list></#if>\n}\n</#if>\n\n<#if functionListDataHistory??>\nconst HistoryLog = defineAsyncComponent(\n  () => import(\'@/components/HistoryLog/index.vue\')\n)\n</#if>\n\n// 获取全局挂载的方法\nconst { proxy } = getCurrentInstance() as ComponentInternalInstance\nconst { useActivated, formatDate } = proxy as any\nconst { t } = useI18n()\nconst { handleTypeForLabel, stateTypes } = useCommonSelectTypes ()\n \nconst {\n  tableConfig, // 表格相关配置属性\n  handleList, // 列表请求函数\n  <#if functionSave?? || functionUpdate ??>\n  dialogConfig, // 弹窗相关配置属性\n  dialogFormRef, // 弹窗表单ref\n  handleResetDialog, // 重置弹窗表单函数\n  handleSubmitDialog, // 提交弹窗表单\n  </#if>\n  <#if functionDelete??>\n  handleDelete, // 删除函数\n  </#if>\n  <#if functionSave ??>\n  handleOpenSaveDialog, // 打开保存弹窗\n  </#if >\n  <#if functionUpdate??> \n  handleOpenUpdateDialog, // 打开编辑弹窗\n  </#if >\n} = useCrud <${(schemaInfo.name)!}, ${ (queryInfo.name)! }, <#if functionDelete??>deleteParamsType</#if>> ({\n  // 列表请求接口\n  listFn: (): Promise<ResponseData<DataList<${ (schemaInfo.name)! }>>> => {\n    return ${ functionList }(tableConfig.queryParams)\n  },\n  <#if functionSave ??>\n  // 新增请求接口\n  saveFn: (): Promise<ResponseData<${ (schemaInfo.name)! } | void>> => {\n    return ${ functionSave }(dialogConfig.dialogFormData)\n  },\n  </#if >\n  <#if functionUpdate??>\n  // 修改请求接口\n  updateFn: (remark?: string): Promise<ResponseData<${ (schemaInfo.name)! } | void>> =>{\n    return ${ functionUpdate }(dialogConfig.dialogFormData, { remark: remark || \'\' })\n  },\n  </#if >  \n  <#if functionDelete??>\n  // 删除请求接口\n  deleteFn: (params: deleteParamsType) => ${ functionDelete }(params)\n  </#if>\n}\n<#if functionUpdate?? || functionDelete??>\n, {\n<#if functionUpdate??>\n    openUpdateRemark: true,\n </#if >\n <#if functionDelete??>\n    openDeleteRemark: true\n</#if >\n  }\n </#if>\n)\n\n  // 搜索表单 结构组成数据\nconst searchFormConfig = computed < SearchFormType[] > (() => {\n  return [\n    <#if (queryInfo.propertyList) ??>\n    <#list queryInfo.propertyList as property >\n    <#if (property.name[0]) != \"$\" && property.name != \"stateGte\" && property.name != \"stateLte\"> <#if property_index != 0 >,\n    </#if > {\n      field: \'${property.name}\',\n      formItem: {\n        label: t(\'${apiName!\"\"}.${(queryInfo.name)!}.${property.name!}\'),\n        labelWidth: \'90\'\n      },\n      formItemWidth: 280,\n      clearable: true,\n      componentType: \'input\',\n      placeholder: t(\'pleaseInput\') + t(\'${apiName!\"\"}.${(schemaInfo.name)!}.${property.name!}\')\n    }</#if ></#list >\n    </#if >\n]\n})\n\n<#if functionEnable??>\n// 启用\nconst handleEnable = (item: ${(schemaInfo.name)!}) => {\n  useSimplifyPrompt({\n    message: t(\'ManagementEnableTips\'),\n    confirmCallBack(remark) {\n      tableConfig.tableLoading = true\n      ${ functionEnable }({\n        id: item.id!,\n        remark: remark || \'\'\n      })\n        .then(res => {\n          if (res.state === \'success\') {\n            ElMessage.success(t(\'ManagementEnableSuccessTips\'))\n            handleList()\n          } else {\n            ElMessage.error(res.msg)\n          }\n          tableConfig.tableLoading = false\n        })\n        .catch(() => {\n          tableConfig.tableLoading = false\n        })\n    }\n  })\n}\n</#if >\n\n\n<#if functionDisable??>\n// 禁用\nconst handleDisable = (item: ${(schemaInfo.name)!}) => {\n  useSimplifyPrompt({\n    message: t(\'ManagementDisableTips\'),\n    confirmCallBack(remark) {\n      tableConfig.tableLoading = true\n      ${ functionDisable }({\n        id: item.id!,\n        remark: remark || \'\'\n      })\n        .then(res => {\n          if (res.state === \'success\') {\n            ElMessage.success(t(\'ManagementDisableSuccessTips\'))\n            handleList()\n          } else {\n            ElMessage.error(res.msg)\n          }\n          tableConfig.tableLoading = false\n        })\n        .catch(() => {\n          tableConfig.tableLoading = false\n        })\n    }\n  })\n}\n</#if >\n\n<#if functionListDataHistory??>\n// 数据历史\nconst queryHistoryRef = ref()\nconst handleHistory = (id: number) => {\n  queryHistoryRef.value.openHistoryLog(id)\n}\nconst queryHistory = (item: ${(schemaInfo.name)!}) => {\n  return ${ functionListDataHistory }(item)\n}\n</#if>\n\n<#if functionListCritLog??>\n// 操作日志\nconst queryCritLogRef = ref()\nconst handleCritLog = (id: number) => {\n  queryCritLogRef.value.openCritLog(id)\n}\nconst queryCritLog = (item: ${(schemaInfo.name)!}) => {\n  return ${ functionListCritLog }(item)\n}\n</#if>\n\nconst exportColumns = computed (() => {\n  return [\n    <#if (queryInfo.propertyList) ??>\n    <#list queryInfo.propertyList as property >\n    <#if (property.name[0]) != \"$\" > <#if property_index != 0 >,\n    </#if > {\n      field: \'${property.name}\',\n      label: t(\'${apiName!\"\"}.${(queryInfo.name)!}.${property.name!}\'),\n    }</#if >\n    </#list >\n    </#if >\n]\n})\n\nconst { startExport } = useExportExcel()\n\n<#list apiInfoList as apiInfo>\n <#if apiInfo.function ==  functionList>\nconst exportExcel = () => {\n  startExport({\n    url: \'/${projectName}${apiInfo.path}\',\n    queryParams: tableConfig.queryParams,\n    columns: exportColumns.value,\n    sizeAll: tableConfig.sizeAll\n  })\n}\n</#if >\n  </#list>\n\n<#if functionList??>\n  useActivated(() => {\n    handleList()\n  })\n</#if >\n  </script>\n\n  <template>\n<div class=\"flex_col\">\n    <#if functionList??>\n<div class=\"flex_col_header\">\n      <SearchForm v-model=\"tableConfig.queryParams\" :bnt-loading=\"tableConfig.tableLoading\" :list=\"searchFormConfig\" @change=\"handleList\" @search=\"handleList\">\n          <template #right>\n        <#if functionSave??>\n            <el-button class=\"margin-left-10\" type=\"primary\" size=\"small\" round icon=\"Plus\" @click=\"handleOpenSaveDialog\">\n              {{ t(\'add\') }}\n            </el-button>\n        </#if>\n                 <el-button\n            @click=\"exportExcel\"\n            round\n            type=\"primary\"\n            size=\"small\"\n            icon=\"Download\"\n          >\n            {{ t(\'export\') }}\n          </el-button>\n          </template>\n      </SearchForm>\n</div>\n    </#if>\n    <el-table border style=\"width: 100%\" :header-cell-style=\"{\n      backgroundColor: \'var(--el-color-info-light-9)\'\n    }\" :data=\"tableConfig.dataList\" v-loading=\"tableConfig.tableLoading\" stripe show-overflow-tooltip class=\"flex_col_body\">\n    <#if (schemaInfo.propertyList) ??>\n     <#list schemaInfo.propertyList as property >\n     <#if property.maxLength lte 1000>\n       <#if property.name?lower_case?ends_with(\"date\")>\n          <el-table-column  \n            prop=\"${property.name}\"\n            :label=\"t(\'${apiName!\"\"}.${(schemaInfo.name)!}.${property.name!}\')\"\n            align=\"center\"\n            width=\"180px\"\n            >\n              <template v-slot=\"{ row }\">\n                <span>{{ formatDate(row[\'${property.name}\']) }}</span>\n              </template>\n            </el-table-column>\n       <#elseif (property.name) == \'state\'>\n         <el-table-column  \n            prop=\"${property.name}\"\n            :label=\"t(\'${apiName!\"\"}.${(schemaInfo.name)!}.${property.name!}\')\"\n            align=\"center\"\n            width=\"90\"\n            >\n              <template v-slot=\"{ row }\">\n                <el-link\n                  :type=\"row.state === 1 ? \'success\' : \'danger\'\"\n                  :underline=\"false\"\n                >\n                  {{ handleTypeForLabel( row.state,  stateTypes ) }}\n                </el-link>\n              </template>\n          </el-table-column>\n       <#else>\n          <el-table-column  \n          prop=\"${property.name}\"\n          :label=\"t(\'${apiName!\"\"}.${(schemaInfo.name)!}.${property.name!}\')\"\n          align=\"center\">\n          </el-table-column>\n        </#if>\n        </#if>\n      </#list >\n    </#if >\n      <#if functionSave?? || functionUpdate??>\n        <el-table-column :label=\"t(\'control\')\" align=\"center\" width=\"220\">\n          <template #default=\"scope\">\n            <el-button-group v-if=\"scope.row.state !== -1\">\n            <template v-if=\"scope.row.state === 0\">\n                <el-tooltip\n                :content=\"t(\'enable\')\"\n                placement=\"top\"\n                >\n                  <el-button\n                    type=\"primary\"\n                    icon=\"CircleCheck\"\n                    size=\"small\"\n                    v-permission=\"usePermissionCode(\'enable\')\"\n                    @click=\"handleEnable(scope.row)\"\n                  ></el-button>\n                </el-tooltip>\n                        </template>\n            <template v-if=\"scope.row.state === 1\">\n                          <el-tooltip\n                            :content=\"t(\'disable\')\"\n                            placement=\"top\"\n                          >\n                            <el-button\n                              type=\"info\"\n                              size=\"small\"\n                              v-permission=\"usePermissionCode(\'disable\')\"\n                              @click=\"handleDisable(scope.row)\"\n                            >\n                              <i class=\"iconfont jinyong\"></i>\n                            </el-button>\n                          </el-tooltip>\n                        </template>\n              <#if functionUpdate??> \n                <el-tooltip\n                :content=\"t(\'edit\')\"\n                placement=\"top\"\n                >\n                  <el-button\n                    type=\"primary\"\n                    icon=\"Edit\"\n                    size=\"small\"\n                    v-permission=\"usePermissionCode(\'update\')\"\n                    @click=\"handleOpenUpdateDialog(scope.row)\"\n                  ></el-button>\n                </el-tooltip>\n              </#if>\n              <#if functionListDataHistory??>\n            <el-tooltip\n              :content=\"t(\'history\')\"\n              placement=\"top\"\n              :enterable=\"false\"\n            >\n              <el-button\n                type=\"warning\"\n                icon=\"Comment\"\n                size=\"small\"\n                v-permission=\"usePermissionCode(\'listDataHistory\')\"\n             @click.stop=\"handleHistory(scope.row.id)\"\n              ></el-button>\n            </el-tooltip>\n            </#if>\n            <#if functionListCritLog??>\n            <el-tooltip\n              :content=\"t(\'critLog\')\"\n              placement=\"top\"\n              :enterable=\"false\"\n            >\n              <el-button\n                type=\"success\"\n                icon=\"DocumentChecked\"\n                size=\"small\"\n                   v-permission=\"usePermissionCode(\'listCritLog\')\"\n               @click.stop=\"handleCritLog(scope.row.id)\"\n              ></el-button>\n            </el-tooltip>\n            </#if>\n              <#if functionDelete??>\n              <template v-if=\"scope.row.state === 0\">\n                  <el-tooltip\n                    :content=\"t(\'delete\')\"\n                    placement=\"top\"\n                  >\n                    <el-button\n                      type=\"danger\"\n                      icon=\"Delete\"\n                      size=\"small\"\n                      v-permission=\"usePermissionCode(\'delete\')\"\n                      @click=\"handleDelete({<#if functionDeleteParameterInfoList??><#list functionDeleteParameterInfoList as parameterInfo>\n                         <#if (parameterInfo.name) == \'remark\' >\n                              ${parameterInfo.name}: \'\'\n                       <#else>\n                              ${parameterInfo.name}:scope.row.${parameterInfo.name}\n                        </#if>  \n                     <#sep>, </#sep></#list></#if>})\"\n                    ></el-button>\n                </el-tooltip>\n              </template>\n              </#if>\n            </el-button-group>\n          </template>\n        </el-table-column>\n      </#if>\n    </el-table>\n\n    <#if functionList??>\n    <!-- 分页组件 -->\n      <Pagination  \n      v-model:page-size=\"tableConfig.queryParams.$rn\"\n      @page-size-change=\"handleList\"\n      :total=\"tableConfig.sizeAll\"\n      v-model:current-page=\"tableConfig.queryParams.$pg\"\n      @current-change=\"handleList\" \n      class=\"flex_col_bottom\"\n      />\n    </#if>\n</div>\n    <#if functionSave?? || functionUpdate??>\n    <!-- 新增、编辑弹窗 -->\n      <el-dialog \n        v-model=\"dialogConfig.dialogShow\" \n        :title=\"dialogConfig.dialogTitle\" \n        destroy-on-close \n        @close=\"handleResetDialog\"\n        draggable\n        :close-on-click-modal=\"false\"\n      >\n       <#if (schemaInfo.propertyList) ??>\n        <div v-loading=\"dialogConfig.dialogLoading\">\n           <el-form\n            ref=\"dialogFormRef\"\n            :model=\"dialogConfig.dialogFormData\"\n            label-width=\"120px\"\n            status-icon\n          >\n            <el-row>\n             <#list schemaInfo.propertyList as property >\n               <#if (property.name) != \"id\" && (property.name) != \"saasId\" && !property.name?lower_case?ends_with(\"date\") && (property.name) != \"state\">\n                <el-col :span=\"20\">\n                  <el-form-item \n                  :label=\"t(\'${apiName!\"\"}.${(schemaInfo.name)!}.${property.name!}\')\" \n                  prop=\"${property.name}\" \n                  :rules=\"[{ required: true, message: t(\'pleaseInput\') + t(\'${apiName!\"\"}.${(schemaInfo.name)!}.${property.name!}\') }]\">\n                    <el-input\n                      v-model=\"dialogConfig.dialogFormData.${property.name}\"\n                      :placeholder=\"t(\'pleaseInput\') + t(\'${apiName!\"\"}.${(schemaInfo.name)!}.${property.name!}\')\"\n                      clearable\n                      ></el-input>\n                </el-form-item>\n                </el-col>\n               </#if >\n             </#list >\n            </el-row>\n          </el-form>\n          </div>\n         </#if >\n        <template #footer>\n          <el-button @click=\"dialogConfig.dialogShow = false\" icon=\"Close\">{{ t(\'cancel\') }}</el-button>\n          <el-button type=\"primary\" @click=\"handleSubmitDialog\" :loading=\"dialogConfig.dialogLoading\" icon=\"Check\">\n            {{ dialogConfig.dialogType === 0 ? t(\'add\') : t(\'edit\') }}\n          </el-button>\n        </template>\n      </el-dialog>\n    </#if>\n\n<#if functionListDataHistory??>\n    <!-- 修改历史 -->\n    <HistoryLog\n      ref=\"queryHistoryRef\"\n      v-model:showDetail=\"dialogConfig.dialogShow\"\n      v-model:detailDialogForm=\"dialogConfig.dialogFormData\"\n      v-model:dialogType=\"dialogConfig.dialogType\"\n      v-model:dialogTitle=\"dialogConfig.dialogTitle\"\n      width=\"1200px\"\n      :queryHistory=\"queryHistory\"\n      entityClass=\"uw.code.center.entity.CodeTemplateGroup\"\n    ></HistoryLog>\n    </#if>\n<#if functionListCritLog??>\n  <!-- 关键日志 -->\n    <CritLog\n      ref=\"queryCritLogRef\"\n      v-model:showDetail=\"dialogConfig.dialogShow\"\n      v-model:detailDialogForm=\"dialogConfig.dialogFormData\"\n      v-model:dialogType=\"dialogConfig.dialogType\"\n      v-model:dialogTitle=\"dialogConfig.dialogTitle\"\n      width=\"1400px\"\n      :queryCritLog=\"queryCritLog\"\n      :showPage=\"true\"\n    ></CritLog>\n    </#if>\n  </template>\n\n  <style lang=\"scss\" scoped></style>\n  <#else>\n    // 此页面无,需要手动开发\n</#if>','2023-10-07 23:28:01.000','2025-03-19 10:55:40.141',1),(12,6,24,'vue3的Ii18n代码模板','按照模块生成i18n代码','/i18n/${apiName!\"\"}.json','{\n  \"${projectName}\": \"${apiName}\",\n<#list apiCatalogInfoList as apiCatalogInfo>\n  \"/${apiName}${apiCatalogInfo.path}\": \"${apiCatalogInfo.title!\"空菜单名\"}\",\n<#list apiCatalogInfo.apiGroupInfoList as apiGroupInfo>\n  \"/${apiName}${apiGroupInfo.path}\": \"${apiGroupInfo.title!\"空菜单名\"}\",\n</#list></#list>\n  \"${apiName!\"\"}\": {\n    <#list schemaInfoList as schemaInfo>\n    \"${schemaInfo.name}\": {\n    <#list schemaInfo.propertyList as property>\n       <#if (property.name[0]) != \"$\">\n      \"${property.name!}\": \"${property.title!}\"<#sep>,</#sep>\n       </#if></#list>\n    }<#sep>,</#sep>\n    </#list>\n  }\n}','2023-10-07 23:28:01.000','2023-10-07 23:28:01.000',1),(15,8,21,'uniapp的api代码模版','按照模板生成uniapp的api代码.\n','/api/${apiName!\"\"}Api.ts','import request from \'@/api/request\'\nimport type { ResponseData, DataList, ESDataList } from \'@/api/type/API_TYPE\'\n\n<#list apiInfoList as apiInfo>\n/**\n * ${apiInfo.title!}\n */\nexport const ${apiInfo.function} = (<#if apiInfo.requestInfo?? && apiInfo.parameterInfoList??>\n\n  data: ${apiInfo.requestInfo.type!\"file\"} ,\n    <#if apiInfo.parameterInfoList?size==1 && (apiInfo.parameterInfoList[0].name?contains(\"queryParam\") || apiInfo.parameterInfoList[0].name?contains(\"QueryParam\"))>\n  params: ${apiInfo.parameterInfoList[0].type}\n    <#else>params: {\n        <#list apiInfo.parameterInfoList as parameter>\n  ${parameter.name}${parameter.required?string(\'\',\'?\')}: ${parameter.type} // ${parameter.title!}\n        </#list>\n}\n    </#if>\n<#elseif apiInfo.requestInfo??>\n\n  data: ${apiInfo.requestInfo.type!\"file\"}\n<#elseif apiInfo.parameterInfoList??>\n    <#if apiInfo.parameterInfoList?size==1 && (apiInfo.parameterInfoList[0].name?contains(\"queryParam\") || apiInfo.parameterInfoList[0].name?contains(\"QueryParam\"))>\n  params: ${apiInfo.parameterInfoList[0].type}\n    <#else>params: {\n        <#list apiInfo.parameterInfoList as parameter>\n  ${parameter.name}${parameter.required?string(\'\',\'?\')}: ${parameter.type} // ${parameter.title!}\n        </#list>\n}</#if></#if>) => {\n  return request({\n    url: \'/${projectName}${apiInfo.path}\',\n    method: \'${apiInfo.method}\',\n<#if apiInfo.requestInfo?? && apiInfo.parameterInfoList??>\n    data,\n    params\n<#elseif apiInfo.requestInfo??>\n    data\n<#elseif apiInfo.parameterInfoList??>\n    params\n</#if>\n  }) as Promise<${apiInfo.responseInfo.type!\"void\"}>\n}\n</#list>\n\n<#list schemaInfoList as schemaInfo>\n/**\n * ${schemaInfo.title!}\n */\nexport interface ${schemaInfo.name} {\n<#list schemaInfo.propertyList as property>\n  ${property.name!}?: ${property.type} //${property.title!}\n</#list>\n}\n</#list>','2023-10-07 23:28:01.000','2024-07-12 15:21:18.856',1),(16,9,11,'java的entity代码(DaoFactory版)','java的entity代码(DaoFactory版)','/entity/${tableMeta.entityName}.java','<#setting number_format=\"#\">\npackage entity;\n\nimport com.fasterxml.jackson.annotation.JsonRawValue;\nimport io.swagger.v3.oas.annotations.media.Schema;\nimport uw.common.util.JsonUtils;\nimport uw.dao.DataEntity;\nimport uw.dao.DataUpdateInfo;\nimport uw.dao.annotation.ColumnMeta;\nimport uw.dao.annotation.TableMeta;\n\nimport java.io.Serializable;\n\n\n/**\n * ${tableMeta.entityName}实体类\n * ${tableMeta.remarks!}\n *\n * @author ${author}\n */\n@TableMeta(tableName=\"${tableMeta.tableName}\",tableType=\"${tableMeta.tableType}\")\n@Schema(title = \"${tableMeta.remarks!}\", description = \"${tableMeta.remarks!}\")\npublic class ${tableMeta.entityName} implements DataEntity,Serializable{\n\n<#list columnList as column>\n\n    /**\n     * <#if column.remarks??>${column.remarks}</#if>\n     */\n    @ColumnMeta(columnName=\"${column.columnName}\", dataType=\"${column.propertyType}\"<#if column.columnSize gt 0>, dataSize=<#if column.columnSize gte 2147483647>2147483646<#else>${column.columnSize}</#if></#if>, nullable=${(column.propertyName == \"saasId\") ? string(\'false\',column.isNullable)}<#if column.isPrimaryKey?? || column.propertyName == \"saasId\">, primaryKey=true</#if><#if column.isAutoIncrement??>, autoIncrement=true</#if>)\n    @Schema(title = \"${column.remarks!}\", description = \"${column.remarks!}\"<#if column.columnSize gt 0>, maxLength=<#if column.columnSize gte 2147483647>2147483646<#else>${column.columnSize}</#if></#if>, nullable=${(column.propertyName == \"saasId\") ? string(\'false\',column.isNullable)} )<#if column.typeName == \"json\">\n    @JsonRawValue(value = false)</#if>\n    private ${column.propertyType} ${column.propertyName};\n</#list>\n\n    /**\n     * 数据更新信息.\n     */\n    private transient DataUpdateInfo _UPDATED_INFO = null;\n\n    /**\n     * 是否加载完成.\n     */\n    private transient boolean _IS_LOADED;\n\n    /**\n     * 获得实体的表名。\n     */\n    @Override\n    public String ENTITY_TABLE(){\n        return \"${tableMeta.tableName}\";\n    }\n\n    /**\n     * 获得实体的表注释。\n     */\n    @Override\n    public String ENTITY_NAME(){\n        return \"${tableMeta.remarks!}\";\n    }\n\n    /**\n     * 获得主键\n     */\n    @Override\n    public Serializable ENTITY_ID(){\n        return <#if pkList?size gt 0>get${pkList[0].propertyName?cap_first}()<#else>getId()</#if>;\n    }\n\n    /**\n     * 获取更新信息.\n     */\n    @Override\n    public DataUpdateInfo GET_UPDATED_INFO() {\n        return this._UPDATED_INFO;\n    }\n\n    /**\n     * 清除更新信息.\n     */\n    @Override\n    public void CLEAR_UPDATED_INFO() {\n        _UPDATED_INFO = null;\n    }\n\n<#list columnList as column>\n\n    /**\n     * 获取<#if column.remarks??>${column.remarks}</#if>。\n     */\n    public ${column.propertyType} get${column.propertyName?cap_first}(){\n        return this.${column.propertyName};\n    }\n</#list>\n\n<#list columnList as column>\n\n    /**\n     * 设置<#if column.remarks??>${column.remarks}</#if>。\n     */\n    public void set${column.propertyName?cap_first}(${column.propertyType} ${column.propertyName}){\n        _UPDATED_INFO = DataUpdateInfo.addUpdateInfo(_UPDATED_INFO, \"${column.propertyName}\", this.${column.propertyName}, ${column.propertyName}, !_IS_LOADED );\n        this.${column.propertyName} = ${column.propertyName};\n    }\n\n    /**\n     *  设置<#if column.remarks??>${column.remarks}</#if>链式调用。\n     */\n    public ${tableMeta.entityName} ${column.propertyName}(${column.propertyType} ${column.propertyName}){\n        set${column.propertyName?cap_first}(${column.propertyName});\n        return this;\n    }\n</#list>\n\n    /**\n     * 重载toString方法.\n     */\n    @Override\n    public String toString() {\n        return JsonUtils.toString(this);\n    }\n\n}','2023-10-07 23:28:01.000','2025-05-22 08:48:48.933',1),(17,9,12,'java的controller代码(DaoFactory版)','java的controller代码(DaoFactory版)','/controller${tableMeta.parentPath}/${tableMeta.entityName}Controller.java','<#assign saasMode = columnList?filter(x->x.propertyName==\"saasId\")?size==1>\npackage controller;\n\nimport io.swagger.v3.oas.annotations.Operation;\nimport io.swagger.v3.oas.annotations.Parameter;\nimport io.swagger.v3.oas.annotations.tags.Tag;\nimport org.springframework.web.bind.annotation.*;\nimport uw.common.app.dto.AuthIdQueryParam;\nimport uw.common.app.dto.SysDataHistoryQueryParam;\nimport uw.common.app.entity.SysCritLog;\nimport uw.common.app.entity.SysDataHistory;\nimport uw.common.app.helper.SysDataHistoryHelper;\nimport uw.auth.service.constant.ActionLog;\nimport uw.auth.service.constant.AuthType;\nimport uw.auth.service.constant.UserType;\nimport uw.common.app.constant.CommonState;\nimport uw.common.app.dto.IdStateQueryParam;\nimport uw.auth.service.AuthServiceHelper;\nimport uw.auth.service.annotation.MscPermDeclare;\nimport uw.common.dto.ResponseData;\nimport uw.dao.DaoFactory;\nimport uw.dao.DataList;\nimport uw.dao.QueryParam;\nimport uw.dao.TransactionException;\nimport uw.dao.constant.DaoResponseCode;\n\nimport java.util.Date;\n\n/**\n * ${tableMeta.remarks!}管理。\n */\n@RestController\n@RequestMapping(\"${tableMeta.entityPath!}\")\n@Tag(name = \"${tableMeta.remarks!}管理\", description = \"${tableMeta.remarks!}增删改查列管理\")\n@MscPermDeclare(user = UserType.SAAS)\npublic class ${tableMeta.entityName}Controller {\n\n    private final DaoFactory dao = DaoFactory.getInstance();\n\n    /**\n     * 列表${tableMeta.remarks!}。\n     *\n     * @param queryParam\n     * @return\n     * @throws TransactionException\n     */\n    @GetMapping(\"/list\")\n    @Operation(summary = \"列表${tableMeta.remarks!}\", description = \"列表${tableMeta.remarks!}\")\n    @MscPermDeclare(user = UserType.SAAS, auth = AuthType.PERM, log = ActionLog.REQUEST)\n    public DataList<${tableMeta.entityName}> list(${tableMeta.entityName}QueryParam queryParam) throws TransactionException {\n        AuthServiceHelper.logRef(${tableMeta.entityName}.class);\n        queryParam.SELECT_SQL( \"SELECT ${columnList?filter(x->x.columnSize<1000)?map(x->x.columnName)?join(\",\")} from ${tableMeta.tableName} \" );\n        return dao.list(${tableMeta.entityName}.class, queryParam);\n    }\n\n    /**\n     * 轻量级列表${tableMeta.remarks!}，一般用于select控件。\n     *\n     * @return\n     */\n    @GetMapping(\"/liteList\")\n    @Operation(summary = \"轻量级列表${tableMeta.remarks!}\", description = \"轻量级列表${tableMeta.remarks!}，一般用于select控件。\")\n    @MscPermDeclare(user = UserType.SAAS, auth = AuthType.USER, log = ActionLog.NONE)\n    public DataList<${tableMeta.entityName}> liteList(${tableMeta.entityName}QueryParam queryParam) throws TransactionException {\n        queryParam.SELECT_SQL( \"SELECT ${columnList?filter(x->x.columnSize<1000)?map(x->x.columnName)?join(\",\")} from ${tableMeta.tableName} \" );\n        return dao.list(${tableMeta.entityName}.class, queryParam);\n    }\n\n    /**\n     * 加载${tableMeta.remarks!}。\n     *\n     * @param ${pkList[0].propertyName}\n     * @throws TransactionException\n     */\n    @GetMapping(\"/load\")\n    @Operation(summary = \"加载${tableMeta.remarks!}\", description = \"加载${tableMeta.remarks!}\")\n    @MscPermDeclare(user = UserType.SAAS, auth = AuthType.PERM, log = ActionLog.REQUEST)\n    public ${tableMeta.entityName} load(@Parameter(description = \"主键ID\", required = true) @RequestParam ${pkList[0].propertyType} ${pkList[0].propertyName}) throws TransactionException {\n        AuthServiceHelper.logRef(${tableMeta.entityName}.class,${pkList[0].propertyName});\n        <#if saasMode>\n        return dao.queryForSingleObject(${tableMeta.entityName}.class, new AuthIdQueryParam(${pkList[0].propertyName}));\n        <#else>\n        return dao.load(${tableMeta.entityName}.class, ${pkList[0].propertyName});\n        </#if>\n    }\n\n    /**\n     * 查询数据历史。\n     *\n     * @param\n     * @return\n     */\n    @GetMapping(\"/listDataHistory\")\n    @Operation(summary = \"查询数据历史\", description = \"查询数据历史\")\n    @MscPermDeclare(user = UserType.SAAS, auth = AuthType.PERM, log = ActionLog.REQUEST)\n    public DataList<SysDataHistory> listDataHistory(SysDataHistoryQueryParam queryParam) throws TransactionException {\n        AuthServiceHelper.logRef(${tableMeta.entityName}.class, queryParam.getEntityId());\n        queryParam.setEntityClass(${tableMeta.entityName}.class);\n        return dao.list(SysDataHistory.class, queryParam);\n    }\n\n    /**\n     * 查询操作日志。\n     *\n     * @param\n     * @return\n     */\n    @GetMapping(\"/listCritLog\")\n    @Operation(summary = \"查询操作日志\", description = \"查询操作日志\")\n    @MscPermDeclare(user = UserType.SAAS, auth = AuthType.PERM, log = ActionLog.REQUEST)\n    public DataList<SysCritLog> listCritLog(SysCritLogQueryParam queryParam) throws TransactionException {\n        AuthServiceHelper.logRef(${tableMeta.entityName}.class, queryParam.getBizId());\n        queryParam.setBizTypeClass(${tableMeta.entityName}.class);\n        return dao.list(SysCritLog.class, queryParam);\n    }\n\n    /**\n     * 新增${tableMeta.remarks!}。\n     *\n     * @param ${tableMeta.entityName?uncap_first}\n     * @return\n     * @throws TransactionException\n     */\n    @PostMapping(\"/save\")\n    @Operation(summary = \"新增${tableMeta.remarks!}\", description = \"新增${tableMeta.remarks!}\")\n    @MscPermDeclare(user = UserType.SAAS, auth = AuthType.PERM, log = ActionLog.CRIT)\n    public ResponseData<${tableMeta.entityName}> save(@RequestBody ${tableMeta.entityName} ${tableMeta.entityName?uncap_first}) throws TransactionException {\n        long id = dao.getSequenceId(${tableMeta.entityName}.class);\n        AuthServiceHelper.logRef(${tableMeta.entityName}.class,id);\n        ${tableMeta.entityName?uncap_first}.setId(id);\n        <#if saasMode>\n        ${tableMeta.entityName?uncap_first}.setSaasId(AuthServiceHelper.getSaasId());\n        </#if>\n        ${tableMeta.entityName?uncap_first}.setCreateDate(new Date());\n        ${tableMeta.entityName?uncap_first}.setModifyDate(null);\n        ${tableMeta.entityName?uncap_first}.setState(CommonState.ENABLED.getValue());\n        dao.save(${tableMeta.entityName?uncap_first});\n        //保存历史记录\n        SysDataHistoryHelper.saveHistory(${tableMeta.entityName?uncap_first});\n        return ResponseData.success(${tableMeta.entityName?uncap_first});\n    }\n\n    /**\n     * 修改${tableMeta.remarks!}。\n     *\n     * @param ${tableMeta.entityName?uncap_first}\n     * @return\n     * @throws TransactionException\n     */\n    @PutMapping(\"/update\")\n    @Operation(summary = \"修改${tableMeta.remarks!}\", description = \"修改${tableMeta.remarks!}\")\n    @MscPermDeclare(user = UserType.SAAS, auth = AuthType.PERM, log = ActionLog.CRIT)\n    public ResponseData<${tableMeta.entityName}> update(@RequestBody ${tableMeta.entityName} ${tableMeta.entityName?uncap_first}, @Parameter(description = \"备注\") @RequestParam String remark) throws TransactionException {\n        AuthServiceHelper.logInfo(${tableMeta.entityName}.class,${tableMeta.entityName?uncap_first}.get${pkList[0].propertyName?cap_first}(),remark);\n        <#if saasMode>\n        ${tableMeta.entityName} ${tableMeta.entityName?uncap_first}Db = dao.queryForSingleObject(${tableMeta.entityName}.class, new AuthIdQueryParam(${tableMeta.entityName?uncap_first}.get${pkList[0].propertyName?cap_first}()));\n        <#else>\n        ${tableMeta.entityName} ${tableMeta.entityName?uncap_first}Db = dao.load(${tableMeta.entityName}.class, ${tableMeta.entityName?uncap_first}.get${pkList[0].propertyName?cap_first}());\n        </#if>\n        if (${tableMeta.entityName?uncap_first}Db == null) {\n            return ResponseData.warnMsg(\"未找到指定ID的${tableMeta.remarks!}！\");\n        }\n        <#list columnList as column>\n            <#if column.propertyName!=\"id\" && column.propertyName!=\"saasId\"\n                && column.propertyName!=\"createDate\" && column.propertyName!=\"state\" && column.propertyName!=\"modifyDate\">\n        ${tableMeta.entityName?uncap_first}Db.set${column.propertyName?cap_first}(${tableMeta.entityName?uncap_first}.get${column.propertyName?cap_first}());\n            </#if>\n        </#list>\n        ${tableMeta.entityName?uncap_first}Db.setModifyDate(new Date());\n        dao.update(${tableMeta.entityName?uncap_first}Db);\n        SysDataHistoryHelper.saveHistory(${tableMeta.entityName?uncap_first}Db,remark);\n        return ResponseData.success(${tableMeta.entityName?uncap_first}Db);\n    }\n\n    /**\n     * 启用${tableMeta.remarks!}。\n     *\n     * @param ${pkList[0].propertyName}\n     * @throws TransactionException\n     */\n    @PutMapping(\"/enable\")\n    @Operation(summary = \"启用${tableMeta.remarks!}\", description = \"启用${tableMeta.remarks!}\")\n    @MscPermDeclare(user = UserType.SAAS, auth = AuthType.PERM, log = ActionLog.CRIT)\n    public ResponseData enable(@Parameter(description = \"主键ID\") @RequestParam ${pkList[0].propertyType} ${pkList[0].propertyName}, @Parameter(description = \"备注\") @RequestParam String remark) throws TransactionException {\n        AuthServiceHelper.logInfo(${tableMeta.entityName}.class,${pkList[0].propertyName},remark);\n   <#if saasMode>\n        int effectedNum = dao.update(new ${tableMeta.entityName}().modifyDate(new Date()).state(CommonState.ENABLED.getValue()), new AuthIdStateQueryParam(${pkList[0].propertyName}, CommonState.DISABLED.getValue()));\n        <#else>\n        int effectedNum = dao.update(new ${tableMeta.entityName}().modifyDate(new Date()).state(CommonState.ENABLED.getValue()), new IdStateQueryParam(${pkList[0].propertyName}, CommonState.DISABLED.getValue()));\n        </#if>\n        if (effectedNum > 0) {\n            return ResponseData.success(effectedNum);\n        }else {\n            return ResponseData.errorCode(DaoResponseCode.DATA_NOT_FOUND_WARN);\n        }\n    }\n\n    /**\n     * 禁用${tableMeta.remarks!}。\n     *\n     * @param ${pkList[0].propertyName}\n     * @throws TransactionException\n     */\n    @PutMapping(\"/disable\")\n    @Operation(summary = \"禁用${tableMeta.remarks!}\", description = \"禁用${tableMeta.remarks!}\")\n    @MscPermDeclare(user = UserType.SAAS, auth = AuthType.PERM, log = ActionLog.CRIT)\n    public ResponseData disable(@Parameter(description = \"主键ID\") @RequestParam ${pkList[0].propertyType} ${pkList[0].propertyName}, @Parameter(description = \"备注\") @RequestParam String remark) throws TransactionException {\n        AuthServiceHelper.logInfo(${tableMeta.entityName}.class,${pkList[0].propertyName},remark);\n   <#if saasMode>\n        int effectedNum = dao.update(new ${tableMeta.entityName}().modifyDate(new Date()).state(CommonState.DISABLED.getValue()), new AuthIdStateQueryParam(${pkList[0].propertyName}, CommonState.ENABLED.getValue()));\n        <#else>\n        int effectedNum = dao.update(new ${tableMeta.entityName}().modifyDate(new Date()).state(CommonState.DISABLED.getValue()), new IdStateQueryParam(${pkList[0].propertyName}, CommonState.ENABLED.getValue()));\n        </#if>\n        if (effectedNum > 0) {\n            return ResponseData.success(effectedNum);\n        }else {\n            return ResponseData.errorCode(DaoResponseCode.DATA_NOT_FOUND_WARN);\n        }\n    }\n\n    /**\n     * 删除${tableMeta.remarks!}。\n     *\n     * @param ${pkList[0].propertyName}\n     * @throws TransactionException\n     */\n    @DeleteMapping(\"/delete\")\n    @Operation(summary = \"删除${tableMeta.remarks!}\", description = \"删除${tableMeta.remarks!}\")\n    @MscPermDeclare(user = UserType.SAAS, auth = AuthType.PERM, log = ActionLog.CRIT)\n    public ResponseData delete(@Parameter(description = \"主键ID\") @RequestParam ${pkList[0].propertyType} ${pkList[0].propertyName}, @Parameter(description = \"备注\") @RequestParam String remark) throws TransactionException {\n        AuthServiceHelper.logInfo(${tableMeta.entityName}.class,${pkList[0].propertyName},remark);\n   <#if saasMode>\n        int effectedNum = dao.update(new ${tableMeta.entityName}().modifyDate(new Date()).state(CommonState.DELETED.getValue()), new AuthIdStateQueryParam(${pkList[0].propertyName}, CommonState.DISABLED.getValue()));\n        <#else>\n        int effectedNum = dao.update(new ${tableMeta.entityName}().modifyDate(new Date()).state(CommonState.DELETED.getValue()), new IdStateQueryParam(${pkList[0].propertyName}, CommonState.DISABLED.getValue()));\n        </#if>\n        if (effectedNum > 0) {\n            return ResponseData.success(effectedNum);\n        }else {\n            return ResponseData.errorCode(DaoResponseCode.DATA_NOT_FOUND_WARN);\n        }\n    }\n\n}','2023-10-07 23:28:01.000','2025-04-24 17:16:44.333',1),(18,9,13,'java的dto代码(DaoFactory版)','java的dto代码(DaoFactory版)','/dto/${tableMeta.entityName}QueryParam.java','<#assign saasMode = columnList?filter(x->x.propertyName==\"saasId\")?size==1>\npackage dto;\n\nimport io.swagger.v3.oas.annotations.media.Schema;\n<#if saasMode>\nimport uw.common.app.dto.AuthPageQueryParam;\n<#else>\nimport uw.dao.PageQueryParam;\n</#if>\nimport uw.dao.annotation.QueryMeta;\n\nimport java.util.Date;\nimport java.util.HashMap;\nimport java.util.Map;\n\n/**\n* ${tableMeta.remarks!}列表查询参数。\n*/\n@Schema(title = \"${tableMeta.remarks!}列表查询参数\", description = \"${tableMeta.remarks!}列表查询参数\")\npublic class ${tableMeta.entityName}QueryParam extends ${saasMode?string(\"AuthPageQueryParam\",\"PageQueryParam\")}{\n\n<#if saasMode>\n    public ${tableMeta.entityName}QueryParam() {\n        super();\n    }\n\n    public ${tableMeta.entityName}QueryParam(Long saasId) {\n        super(saasId);\n    }\n	\n</#if>\n    /**\n     * 允许的排序属性。\n     * key:排序名 value:排序字段\n     *\n     * @return\n     */\n    @Override\n    public Map<String, String> ALLOWED_SORT_PROPERTY() {\n        return new HashMap<>() {{\n<#list columnList?filter(x->x.columnSize<1000) as column>\n            put( \"${column.propertyName}\", \"${column.columnName}\" );\n</#list>\n        }};\n    }\n\n<#list columnList?filter(x->x.propertyName!=\"saasId\") as column>\n    <#if column.columnName == \"id\">\n    /**\n    * ${column.remarks!}。\n    */\n    @QueryMeta(expr = \"${column.columnName}=?\")\n    @Schema(title=\"${column.remarks}\", description = \"${column.remarks}\")\n    private ${column.propertyObject} ${column.propertyName};\n\n    /**\n    * ID数组。\n    */\n    @QueryMeta(expr = \"${column.columnName} in (?)\")\n    @Schema(title=\"ID数组\", description = \"ID数组，可同时匹配多个。\")\n    private ${column.propertyObject}[] ids;\n\n    <#elseif column.propertyObject == \"java.util.Date\">\n    /**\n    * ${column.remarks!}范围。\n    */\n    @QueryMeta(expr = \"${column.columnName} between ? and ?\")\n    @Schema(title=\"${column.remarks}范围\", description = \"${column.remarks}范围\")\n    private ${column.propertyObject}[] ${column.propertyName}Range;\n\n    <#elseif column.columnName == \"state\">\n    /**\n    * ${column.remarks!}。\n    */\n    @QueryMeta(expr = \"${column.columnName}=?\")\n    @Schema(title=\"${column.remarks}\", description = \"${column.remarks}\")\n    private ${column.propertyObject} ${column.propertyName};\n\n    /**\n    * ${column.remarks!}数组。\n    */\n    @QueryMeta(expr = \"${column.columnName} in (?)\")\n    @Schema(title=\"${column.remarks}数组\", description = \"${column.remarks}数组，可同时匹配多个状态。\")\n    private ${column.propertyObject}[] ${column.propertyName}s;\n\n    /**\n    * 大于等于${column.remarks!}。\n    */\n    @QueryMeta(expr = \"${column.columnName}>=?\")\n    @Schema(title=\"大于等于${column.remarks}\", description = \"大于等于${column.remarks}\")\n    private ${column.propertyObject} ${column.propertyName}Gte;\n\n    /**\n    * 小于等于${column.remarks!}。\n    */\n    @QueryMeta(expr = \"${column.columnName}<=?\")\n    @Schema(title=\"小于等于${column.remarks}\", description = \"小于等于${column.remarks}\")\n    private ${column.propertyObject} ${column.propertyName}Lte;\n\n    <#else>\n    <#if column.propertyObject == \"String\">\n    <#if column.columnSize < 1000>\n    /**\n    * ${column.remarks!}。\n    */\n    @QueryMeta(expr = \"${column.columnName} like ?\")\n    @Schema(title=\"${column.remarks}\", description = \"${column.remarks}\")\n    private ${column.propertyObject} ${column.propertyName};\n	\n    </#if>\n    <#elseif (column.propertyObject == \"Long\" || column.propertyObject == \"Integer\") && !column.columnName?contains(\"id\") && !column.columnName?contains(\"type\") && !column.columnName?contains(\"state\")>\n    /**\n    * ${column.remarks!}。\n    */\n    @QueryMeta(expr = \"${column.columnName}=?\")\n    @Schema(title=\"${column.remarks}\", description = \"${column.remarks}\")\n    private ${column.propertyObject} ${column.propertyName};\n\n    /**\n    * ${column.remarks!}范围。\n    */\n    @QueryMeta(expr = \"${column.columnName} between ? and ?\")\n    @Schema(title=\"${column.remarks}范围\", description = \"${column.remarks}范围\")\n    private ${column.propertyObject}[] ${column.propertyName}Range;\n	\n    <#else>\n    /**\n    * ${column.remarks!}。\n    */\n    @QueryMeta(expr = \"${column.columnName}=?\")\n    @Schema(title=\"${column.remarks}\", description = \"${column.remarks}\")\n    private ${column.propertyObject} ${column.propertyName};\n	\n    </#if>\n    </#if>\n</#list>\n\n<#list columnList?filter(x->x.propertyName!=\"saasId\") as column>\n    <#if column.columnName == \"id\">\n    /**\n    * 获取${column.remarks!}。\n    */\n    public ${column.propertyObject} get${column.propertyName?cap_first}() {\n        return this.${column.propertyName};\n    }\n\n    /**\n    * 设置${column.remarks!}。\n    */\n    public void set${column.propertyName?cap_first}(${column.propertyObject} ${column.propertyName}) {\n        this.${column.propertyName} = ${column.propertyName};\n    }\n\n    /**\n    * 设置${column.remarks!}链式调用。\n    */\n    public ${tableMeta.entityName}QueryParam ${column.propertyName}(${column.propertyObject} ${column.propertyName}) {\n        set${column.propertyName?cap_first}(${column.propertyName});\n        return this;\n    }\n\n    /**\n    * 获取ID数组。\n    */\n    public ${column.propertyObject}[] getIds() {\n        return this.ids;\n    }\n\n    /**\n    * 设置ID数组。\n    */\n    public void setIds(${column.propertyObject}[] ids) {\n        this.ids = ids;\n    }\n\n    /**\n    * 设置ID数组链式调用。\n    */\n    public ${tableMeta.entityName}QueryParam ids(${column.propertyObject}[] ids) {\n        setIds(ids);\n        return this;\n    }\n\n    <#elseif column.propertyObject == \"java.util.Date\">\n    /**\n    * 获取${column.remarks!}范围。\n    */\n    public ${column.propertyObject}[] get${column.propertyName?cap_first}Range(){\n        return this.${column.propertyName}Range;\n    }\n\n    /**\n    * 设置${column.remarks!}范围。\n    */\n    public void set${column.propertyName?cap_first}Range(${column.propertyObject}[] ${column.propertyName}Range){\n        this.${column.propertyName}Range = ${column.propertyName}Range;\n    }\n	\n    /**\n    * 设置${column.remarks!}范围链式调用。\n    */\n    public ${tableMeta.entityName}QueryParam ${column.propertyName}Range(${column.propertyObject}[] ${column.propertyName}Range) {\n        set${column.propertyName?cap_first}Range(${column.propertyName}Range);\n        return this;\n    }\n	\n    <#elseif column.columnName == \"state\">\n    /**\n    * 获取${column.remarks!}。\n    */\n    public ${column.propertyObject} get${column.propertyName?cap_first}(){\n        return this.${column.propertyName};\n    }\n\n    /**\n    * 设置${column.remarks!}。\n    */\n    public void set${column.propertyName?cap_first}(${column.propertyObject} ${column.propertyName}){\n        this.${column.propertyName} = ${column.propertyName};\n    }\n	\n    /**\n    * 设置${column.remarks!}链式调用。\n    */\n    public ${tableMeta.entityName}QueryParam ${column.propertyName}(${column.propertyObject} ${column.propertyName}) {\n        set${column.propertyName?cap_first}(${column.propertyName});\n        return this;\n    }\n\n    /**\n    * 获取${column.remarks!}数组。\n    */\n    public ${column.propertyObject}[] get${column.propertyName?cap_first}s(){\n        return this.${column.propertyName}s;\n    }\n\n    /**\n    * 设置${column.remarks!}数组。\n    */\n    public void set${column.propertyName?cap_first}s(${column.propertyObject}[] ${column.propertyName}s){\n        this.${column.propertyName}s = ${column.propertyName}s;\n    }\n	\n    /**\n    * 设置${column.remarks!}数组链式调用。\n    */\n    public ${tableMeta.entityName}QueryParam ${column.propertyName}s(${column.propertyObject}[] ${column.propertyName}s) {\n        set${column.propertyName?cap_first}s(${column.propertyName}s);\n        return this;\n    }\n    \n    /**\n    * 获取大于等于${column.remarks!}。\n    */\n    public ${column.propertyObject} get${column.propertyName?cap_first}Gte(){\n        return this.${column.propertyName}Gte;\n    }\n\n    /**\n    * 设置大于等于${column.remarks!}。\n    */\n    public void set${column.propertyName?cap_first}Gte(${column.propertyObject} ${column.propertyName}Gte){\n        this.${column.propertyName}Gte = ${column.propertyName}Gte;\n    }\n	\n    /**\n    * 设置大于等于${column.remarks!}链式调用。\n    */\n    public ${tableMeta.entityName}QueryParam ${column.propertyName}Gte(${column.propertyObject} ${column.propertyName}Gte) {\n        set${column.propertyName?cap_first}Gte(${column.propertyName}Gte);\n        return this;\n    }\n    \n    /**\n    * 获取小于等于${column.remarks!}。\n    */\n    public ${column.propertyObject} get${column.propertyName?cap_first}Lte(){\n        return this.${column.propertyName}Lte;\n    }\n\n    /**\n    * 获取小于等于${column.remarks!}。\n    */\n    public void set${column.propertyName?cap_first}Lte(${column.propertyObject} ${column.propertyName}Lte){\n        this.${column.propertyName}Lte = ${column.propertyName}Lte;\n    }\n	\n    /**\n    * 获取小于等于${column.remarks!}链式调用。\n    */\n    public ${tableMeta.entityName}QueryParam ${column.propertyName}Lte(${column.propertyObject} ${column.propertyName}Lte) {\n        set${column.propertyName?cap_first}Lte(${column.propertyName}Lte);\n        return this;\n    }\n    \n    <#else>\n    <#if column.propertyObject == \"String\">\n    <#if column.columnSize < 1000>\n    /**\n    * 获取${column.remarks!}。\n    */\n    public ${column.propertyObject} get${column.propertyName?cap_first}(){\n        return this.${column.propertyName};\n    }\n\n    /**\n    * 设置${column.remarks!}。\n    */\n    public void set${column.propertyName?cap_first}(${column.propertyObject} ${column.propertyName}){\n        this.${column.propertyName} = ${column.propertyName};\n    }\n	\n    /**\n    * 设置${column.remarks!}链式调用。\n    */\n    public ${tableMeta.entityName}QueryParam ${column.propertyName}(${column.propertyObject} ${column.propertyName}) {\n        set${column.propertyName?cap_first}(${column.propertyName});\n        return this;\n    }\n	\n    </#if>\n    <#elseif (column.propertyObject == \"Long\" || column.propertyObject == \"Integer\") && !column.columnName?contains(\"id\") && !column.columnName?contains(\"type\") && !column.columnName?contains(\"state\")>\n    /**\n    * 获取${column.remarks!}。\n    */\n    public ${column.propertyObject} get${column.propertyName?cap_first}(){\n        return this.${column.propertyName};\n    }\n\n    /**\n    * 设置${column.remarks!}。\n    */\n    public void set${column.propertyName?cap_first}(${column.propertyObject} ${column.propertyName}){\n        this.${column.propertyName} = ${column.propertyName};\n    }\n	\n    /**\n    * 设置${column.remarks!}链式调用。\n    */\n    public ${tableMeta.entityName}QueryParam ${column.propertyName}(${column.propertyObject} ${column.propertyName}){\n        set${column.propertyName?cap_first}(${column.propertyName});\n        return this;\n    }\n\n    /**\n    * 获取${column.remarks!}范围。\n    */\n    public ${column.propertyObject}[] get${column.propertyName?cap_first}Range(){\n        return this.${column.propertyName}Range;\n    }\n\n    /**\n    * 设置${column.remarks!}范围。\n    */\n    public void set${column.propertyName?cap_first}Range(${column.propertyObject}[] ${column.propertyName}Range){\n        this.${column.propertyName}Range = ${column.propertyName}Range;\n    }\n	\n    /**\n    * 设置${column.remarks!}范围链式调用。\n    */\n    public ${tableMeta.entityName}QueryParam ${column.propertyName}Range(${column.propertyObject}[] ${column.propertyName}Range){\n        set${column.propertyName?cap_first}Range(${column.propertyName}Range);\n        return this;\n    }\n	\n    <#else>\n    /**\n    * 获取${column.remarks!}。\n    */\n    public ${column.propertyObject} get${column.propertyName?cap_first}(){\n        return this.${column.propertyName};\n    }\n\n    /**\n    * 设置${column.remarks!}。\n    */\n    public void set${column.propertyName?cap_first}(${column.propertyObject} ${column.propertyName}){\n        this.${column.propertyName} = ${column.propertyName};\n    }\n	\n    /**\n    * 设置${column.remarks!}链式调用。\n    */\n	public ${tableMeta.entityName}QueryParam ${column.propertyName}(${column.propertyObject} ${column.propertyName}){\n        set${column.propertyName?cap_first}(${column.propertyName});\n        return this;\n    }\n	\n    </#if>\n    </#if>\n</#list>\n\n}','2023-10-07 23:28:01.000','2025-04-17 21:55:07.427',1);
/*!40000 ALTER TABLE `code_template_info` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `sys_crit_log`
--

DROP TABLE IF EXISTS `sys_crit_log`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `sys_crit_log` (
                                `id` bigint NOT NULL COMMENT 'ID',
                                `saas_id` bigint NOT NULL COMMENT 'saasId',
                                `mch_id` bigint DEFAULT NULL COMMENT '商户ID',
                                `user_id` bigint NOT NULL COMMENT '用户id',
                                `user_type` int DEFAULT NULL COMMENT '用户类型',
                                `group_id` bigint DEFAULT NULL COMMENT '用户组ID',
                                `user_name` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL COMMENT '用户名',
                                `nick_name` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL COMMENT '用户昵称',
                                `real_name` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL COMMENT '真实名称',
                                `user_ip` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL COMMENT '用户ip',
                                `api_uri` varchar(200) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL COMMENT '请求uri',
                                `api_name` varchar(200) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL COMMENT 'API名称',
                                `biz_type` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL COMMENT '业务类型',
                                `biz_id` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL COMMENT '业务ID',
                                `biz_log` text CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci COMMENT '业务日志',
                                `request_date` datetime(3) NOT NULL DEFAULT CURRENT_TIMESTAMP(3) COMMENT '请求时间',
                                `request_body` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci COMMENT '请求参数',
                                `response_state` varchar(10) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL COMMENT '响应状态',
                                `response_code` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL COMMENT '响应代码',
                                `response_msg` varchar(1000) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL COMMENT '响应消息',
                                `response_body` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci COMMENT '响应日志',
                                `response_millis` bigint DEFAULT NULL COMMENT '请求毫秒数',
                                `status_code` int DEFAULT NULL COMMENT '响应状态码',
                                `app_info` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL COMMENT '应用信息',
                                `app_host` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL COMMENT '应用主机',
                                PRIMARY KEY (`id`),
                                KEY `sys_crit_log_saas_id_IDX` (`saas_id`,`user_id`) USING BTREE,
                                KEY `sys_crit_log_biz_type_IDX` (`biz_type`,`biz_id`) USING BTREE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='系统关键日志';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `sys_crit_log`
--

LOCK TABLES `sys_crit_log` WRITE;
/*!40000 ALTER TABLE `sys_crit_log` DISABLE KEYS */;
/*!40000 ALTER TABLE `sys_crit_log` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `sys_data_history`
--

DROP TABLE IF EXISTS `sys_data_history`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `sys_data_history` (
                                    `id` bigint NOT NULL COMMENT 'ID',
                                    `saas_id` bigint NOT NULL COMMENT 'saasId',
                                    `mch_id` bigint DEFAULT NULL COMMENT '商户ID',
                                    `user_id` bigint NOT NULL COMMENT '用户ID',
                                    `user_type` int DEFAULT NULL COMMENT '用户类型',
                                    `group_id` bigint DEFAULT NULL COMMENT '用户的组ID',
                                    `user_name` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL COMMENT '用户名称',
                                    `nick_name` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL COMMENT '用户昵称',
                                    `real_name` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL COMMENT '真实名称',
                                    `entity_class` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL COMMENT '实体类',
                                    `entity_id` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL COMMENT '实体ID',
                                    `entity_name` varchar(200) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL COMMENT '实体名',
                                    `entity_data` json DEFAULT NULL COMMENT '实体数据',
                                    `entity_update_info` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci COMMENT '实体修改信息',
                                    `remark` text CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci COMMENT '备注信息',
                                    `user_ip` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL COMMENT '用户IP',
                                    `create_date` datetime(3) DEFAULT CURRENT_TIMESTAMP(3) COMMENT '创建日期',
                                    PRIMARY KEY (`id`),
                                    KEY `sys_data_history_entity_class_IDX` (`entity_class`,`entity_id`) USING BTREE,
                                    KEY `sys_data_history_saas_id_IDX` (`saas_id`,`user_id`) USING BTREE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='系统数据历史';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `sys_data_history`
--

LOCK TABLES `sys_data_history` WRITE;
/*!40000 ALTER TABLE `sys_data_history` DISABLE KEYS */;
/*!40000 ALTER TABLE `sys_data_history` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `sys_seq`
--

DROP TABLE IF EXISTS `sys_seq`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `sys_seq` (
                           `seq_name` varchar(200) NOT NULL,
                           `seq_id` bigint DEFAULT NULL,
                           `seq_desc` varchar(200) DEFAULT NULL,
                           `increment_num` int DEFAULT NULL,
                           `create_date` datetime(3) DEFAULT NULL,
                           `last_update` datetime(3) DEFAULT NULL,
                           PRIMARY KEY (`seq_name`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='SYS序列';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `sys_seq`
--

LOCK TABLES `sys_seq` WRITE;
/*!40000 ALTER TABLE `sys_seq` DISABLE KEYS */;
INSERT INTO `sys_seq` VALUES ('CodeCritLog',10000,'CodeCritLog',1,'2024-02-20 11:16:48.000','2024-02-20 11:16:48.000'),('CodeDataHistory',1111,'CodeDataHistory',1,'2023-09-26 15:30:22.000','2024-01-06 22:56:07.000'),('CodeTemplate',20,'CodeTemplate',1,'2023-09-26 15:30:22.000','2023-10-07 23:28:01.000'),('CodeTemplateGroup',10010,'CodeTemplateGroup',1,'2023-09-26 15:30:22.000','2024-02-20 11:16:29.000'),('CodeTemplateInfo',10000,'CodeTemplateInfo',1,'2025-04-09 18:17:47.000','2025-04-09 18:17:47.000'),('SysCritLog',10000,'SysCritLog',1,'2024-06-24 23:50:21.000','2024-06-24 23:50:21.000'),('SysDataHistory',10000,'SysDataHistory',1,'2024-06-19 12:24:32.000','2024-06-19 12:24:32.000');
/*!40000 ALTER TABLE `sys_seq` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Dumping routines for database 'uw_code'
--
/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;

/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;

-- Dump completed on 2025-05-23  9:38:15